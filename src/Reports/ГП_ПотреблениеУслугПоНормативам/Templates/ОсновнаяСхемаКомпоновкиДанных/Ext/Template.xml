<?xml version="1.0" encoding="UTF-8"?>
<DataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema" xmlns:dcscom="http://v8.1c.ru/8.1/data-composition-system/common" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<dataSource>
		<name>ИсточникДанных1</name>
		<dataSourceType>Local</dataSourceType>
	</dataSource>
	<dataSet xsi:type="DataSetQuery">
		<name>НаборДанных1</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>Группа</dataPath>
			<field>Группа</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Группа</v8:content>
				</v8:item>
			</title>
			<orderExpression>
				<dcscom:expression>ВЫБОР
	КОГДА Строка(Группа) = "" ТОГДА "ЯЯЯ"
	КОГДА Строка(Группа) = "Водомер" ТОГДА "0"
	КОГДА Строка(Группа) = "По среднему" ТОГДА "1"
	КОГДА Строка(Группа) = "По нормативу (без показаний)" ТОГДА "2"
	КОГДА Строка(Группа) = "По нормативу" ТОГДА "3"
	ИНАЧЕ Строка(Группа)
КОНЕЦ</dcscom:expression>
				<dcscom:orderType>Asc</dcscom:orderType>
				<dcscom:autoOrder>false</dcscom:autoOrder>
			</orderExpression>
			<valueType>
				<v8:Type>xs:string</v8:Type>
				<v8:StringQualifiers>
					<v8:Length>0</v8:Length>
					<v8:AllowedLength>Variable</v8:AllowedLength>
				</v8:StringQualifiers>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ЛицевойСчет</dataPath>
			<field>ЛицевойСчет</field>
			<valueType>
				<v8:Type xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.КВП_ЛицевыеСчета</v8:Type>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Период</dataPath>
			<field>Период</field>
			<role>
				<dcscom:periodNumber>2</dcscom:periodNumber>
				<dcscom:periodType>Main</dcscom:periodType>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Регистратор</dataPath>
			<field>Регистратор</field>
			<role>
				<dcscom:periodNumber>1</dcscom:periodNumber>
				<dcscom:periodType>Main</dcscom:periodType>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Услуга</dataPath>
			<field>Услуга</field>
			<valueType>
				<v8:Type xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.КВП_Услуги</v8:Type>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Расход</dataPath>
			<field>Расход</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Расход</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>0</v8:Digits>
					<v8:FractionDigits>0</v8:FractionDigits>
					<v8:AllowedSign>Any</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВидТарифа</dataPath>
			<field>ВидТарифа</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Контрагент</dataPath>
			<field>Контрагент</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Контрагент</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.Контрагенты</v8:Type>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Договор</dataPath>
			<field>Договор</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Договор</v8:content>
				</v8:item>
			</title>
			<orderExpression>
				<dcscom:expression>ГП_РаботаСДоговорами.ПреобразоватьНомерДоговораВЧислоПринудительно(Строка(Договор.Номер))</dcscom:expression>
				<dcscom:orderType>Asc</dcscom:orderType>
				<dcscom:autoOrder>false</dcscom:autoOrder>
			</orderExpression>
			<valueType>
				<v8:Type xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.ДоговорыКонтрагентов</v8:Type>
			</valueType>
			<inputParameters>
				<dcscor:item>
					<dcscor:parameter>СвязиПараметровВыбора</dcscor:parameter>
					<dcscor:value xsi:type="dcscor:ChoiceParameterLinks">
						<dcscor:item>
							<dcscor:choiceParameter>Отбор.Владелец</dcscor:choiceParameter>
							<dcscor:value>Контрагент</dcscor:value>
							<dcscor:mode xmlns:d8p1="http://v8.1c.ru/8.1/data/enterprise" xsi:type="d8p1:LinkedValueChangeMode">Clear</dcscor:mode>
						</dcscor:item>
					</dcscor:value>
				</dcscor:item>
			</inputParameters>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Номенклатура</dataPath>
			<field>Номенклатура</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Номенклатура</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.Номенклатура</v8:Type>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>НоменклатурнаяГруппа</dataPath>
			<field>НоменклатурнаяГруппа</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Номенклатурная группа</v8:content>
				</v8:item>
			</title>
			<presentationExpression>ГП_РаботаСОтчетами.ПолучитьПредставлениеНоменклатурнойГруппыВодаСток(НоменклатурнаяГруппа)</presentationExpression>
			<orderExpression>
				<dcscom:expression>ВЫБОР 
	КОГДА Строка(НоменклатурнаяГруппа) = "Водоснабжение" ТОГДА 0 
	КОГДА Строка(НоменклатурнаяГруппа) = "Водоотведение" ТОГДА 1 
	КОГДА Строка(НоменклатурнаяГруппа) = "" ТОГДА "ЯЯЯ"
	ИНАЧЕ Строка(НоменклатурнаяГруппа) 
КОНЕЦ возр</dcscom:expression>
				<dcscom:orderType>Asc</dcscom:orderType>
				<dcscom:autoOrder>false</dcscom:autoOrder>
			</orderExpression>
			<valueType>
				<v8:Type xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.НоменклатурныеГруппы</v8:Type>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВидУслуги</dataPath>
			<field>ВидУслуги</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Вид услуги</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>УслугаОснование</dataPath>
			<field>УслугаОснование</field>
			<valueType>
				<v8:Type xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.КВП_Услуги</v8:Type>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоПроживающих</dataPath>
			<field>КоличествоПроживающих</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Количество проживающих</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>0</v8:Digits>
					<v8:FractionDigits>0</v8:FractionDigits>
					<v8:AllowedSign>Any</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоЗарегистрированных</dataPath>
			<field>КоличествоЗарегистрированных</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Количество. зарегистрированных</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>0</v8:Digits>
					<v8:FractionDigits>0</v8:FractionDigits>
					<v8:AllowedSign>Any</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Финансирование</dataPath>
			<field>Финансирование</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Способ финансирования</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Контролер</dataPath>
			<field>Контролер</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Контролер</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Водозабор</dataPath>
			<field>Водозабор</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Водозабор</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Договородержатель</dataPath>
			<field>Договородержатель</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Договородержатель</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Характеристика</dataPath>
			<field>Характеристика</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Характеристика</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>[Группа потребителей]</dataPath>
			<field>ВидПотребления</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Группа потребителей</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>НормативныйРасход</dataPath>
			<field>НормативныйРасход</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Нормативный расход</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>0</v8:Digits>
					<v8:FractionDigits>0</v8:FractionDigits>
					<v8:AllowedSign>Any</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Норма</dataPath>
			<field>Норма</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Норма</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>0</v8:Digits>
					<v8:FractionDigits>0</v8:FractionDigits>
					<v8:AllowedSign>Any</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ЗаголовокОбщихДанных</dataPath>
			<field>ЗаголовокОбщихДанных</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Заголовок общих данных</v8:content>
				</v8:item>
			</title>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<query>ВЫБРАТЬ
	РасчетПриборовУчета.Период КАК Период,
	РасчетПриборовУчета.Регистратор КАК Регистратор,
	РасчетПриборовУчета.ВидДвижения КАК ВидДвижения,
	РасчетПриборовУчета.Объект КАК Объект,
	РасчетПриборовУчета.Счетчик КАК Счетчик,
	РасчетПриборовУчета.Услуга КАК Услуга,
	РасчетПриборовУчета.ВидПоказания КАК ВидПоказания,
	РасчетПриборовУчета.Показание КАК Показание
ПОМЕСТИТЬ ВТ_РасходУслуг
ИЗ
	РегистрНакопления.УПЖКХ_РасчетПриборовУчета КАК РасчетПриборовУчета
ГДЕ
	РасчетПриборовУчета.Активность = ИСТИНА
	И РасчетПриборовУчета.Период &gt;= &amp;НачалоПериода
	И РасчетПриборовУчета.Период &lt;= &amp;КонецПериода
	И РасчетПриборовУчета.ВидДвижения = ЗНАЧЕНИЕ(ВидДвиженияНакопления.Расход)
{ГДЕ
	ВЫБОР
		КОГДА РасчетПриборовУчета.Объект ССЫЛКА Справочник.КВП_ЛицевыеСчета
			ТОГДА РасчетПриборовУчета.Объект = &amp;ЛицевойСчет
		ИНАЧЕ
			ИСТИНА
	КОНЕЦ}
;

ВЫБРАТЬ РАЗЛИЧНЫЕ
	ВЫРАЗИТЬ(ВТ_РасходУслуг.Объект КАК Справочник.КВП_ЛицевыеСчета) КАК ЛицевойСчет,
	ВТ_РасходУслуг.Услуга КАК Услуга
ПОМЕСТИТЬ ВТ_ЛицевыеСчетаБезСПасходомТолькоЗаПериодРасчета // РасходЗаПериодРасчета (по среднему)
ИЗ
	ВТ_РасходУслуг КАК ВТ_РасходУслуг
ГДЕ
	ВТ_РасходУслуг.Объект ССЫЛКА Справочник.КВП_ЛицевыеСчета
	И ВТ_РасходУслуг.Счетчик.СпособРегистрацииПоказаний = ЗНАЧЕНИЕ(Перечисление.КВП_СпособыРегистрацииПоказанийСчетчиков.РасходЗаПериодРасчета)
	И НЕ (ВТ_РасходУслуг.Объект, ВТ_РасходУслуг.Услуга) В (
		ВЫБРАТЬ РАЗЛИЧНЫЕ
			ВТ_РасходУслуг.Объект,
			ВТ_РасходУслуг.Услуга
		ИЗ
			ВТ_РасходУслуг КАК ВТ_РасходУслуг
		ГДЕ
			ВТ_РасходУслуг.Объект ССЫЛКА Справочник.КВП_ЛицевыеСчета
			И ВТ_РасходУслуг.Счетчик.СпособРегистрацииПоказаний &lt;&gt; ЗНАЧЕНИЕ(Перечисление.КВП_СпособыРегистрацииПоказанийСчетчиков.РасходЗаПериодРасчета)
	)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	Начисления.Период КАК Период,
	Начисления.Регистратор КАК Регистратор,
	Начисления.НомерСтроки КАК НомерСтроки,
	Начисления.ЛицевойСчет КАК ЛицевойСчет,
	Начисления.Услуга КАК Услуга,
	Начисления.Договор КАК Договор,
	Начисления.УслугаОснование КАК УслугаОснование,
	Начисления.СоставнаяУслуга КАК СоставнаяУслуга,
	Начисления.РазделУчета КАК РазделУчета,
	Начисления.ВидНачисления КАК ВидНачисления,
	Начисления.ИсточникОплаты КАК ИсточникОплаты,
	Начисления.МесяцНачисления КАК МесяцНачисления,
	Начисления.Тариф КАК Тариф,
	Начисления.ВидТарифа КАК ВидТарифа,
	Начисления.МесяцРассрочки КАК МесяцРассрочки,
	ВЫБОР
		КОГДА Начисления.ВидНачисления В (ЗНАЧЕНИЕ(Перечисление.УПЖКХ_ВидыНачислений.КорректировкаПриОтсутствииПоказанийПоИПУ), ЗНАЧЕНИЕ(Перечисление.УПЖКХ_ВидыНачислений.КорректировкаПриОтсутствииДействующегоИПУ))
			ТОГДА -Начисления.Количество
		ИНАЧЕ Начисления.Количество
	КОНЕЦ КАК Количество,
	Начисления.УровеньРаспределения КАК УровеньРаспределения,
	Начисления.ОснованиеКорректировки КАК ОснованиеКорректировки,
	Начисления.ТипНачисления КАК ТипНачисления,
	Начисления.СуммаНачисления КАК СуммаНачисления,
	Начисления.ДнейНачислено КАК ДнейНачислено,
	Начисления.Начало КАК Начало,
	Начисления.Окончание КАК Окончание,
	Начисления.Тарифность КАК Тарифность,
	Начисления.КоличествоУчетное КАК КоличествоУчетное
ПОМЕСТИТЬ ВТ_Начисления
ИЗ
	РегистрНакопления.УПЖКХ_Начисления КАК Начисления
ГДЕ
	Начисления.Активность = ИСТИНА
	И Начисления.Период &gt;= &amp;НачалоПериода
	И Начисления.Период &lt;= &amp;КонецПериода
	И Начисления.Организация = &amp;Организация
	И Начисления.РазделУчета В (
		ЗНАЧЕНИЕ(Перечисление.УПЖКХ_РазделыУчета.НачислениеУслуг), 
		ЗНАЧЕНИЕ(Перечисление.УПЖКХ_РазделыУчета.НачислениеПоПУ), 
		ЗНАЧЕНИЕ(Перечисление.УПЖКХ_РазделыУчета.ДобровольноеСтрахование)
		)
	И Начисления.ВидНачисления В (
		ЗНАЧЕНИЕ(Перечисление.УПЖКХ_ВидыНачислений.Начисление), 
		ЗНАЧЕНИЕ(Перечисление.УПЖКХ_ВидыНачислений.НачислениеПоИПУ), 
		ЗНАЧЕНИЕ(Перечисление.УПЖКХ_ВидыНачислений.НачислениеПоОПУ), 
		ЗНАЧЕНИЕ(Перечисление.УПЖКХ_ВидыНачислений.НачислениеПриОтсутствииПоказанийИПУПоНормативу), 
		ЗНАЧЕНИЕ(Перечисление.УПЖКХ_ВидыНачислений.НачислениеПриОтсутствииПоказанийИПУПоСреднему), 
		ЗНАЧЕНИЕ(Перечисление.УПЖКХ_ВидыНачислений.НачислениеПриОтсутствииДействующегоИПУПоНормативу), 
		ЗНАЧЕНИЕ(Перечисление.УПЖКХ_ВидыНачислений.НачислениеПриОтсутствииДействующегоИПУПоНормативуЗаСчетПовышающегоКоэффициента), 
		ЗНАЧЕНИЕ(Перечисление.УПЖКХ_ВидыНачислений.НачислениеПриОтсутствииДействующегоИПУПоСреднему), 
		ЗНАЧЕНИЕ(Перечисление.УПЖКХ_ВидыНачислений.ФактическиеЗатраты), 
		ЗНАЧЕНИЕ(Перечисление.УПЖКХ_ВидыНачислений.СервисныеУслуги), 
		ЗНАЧЕНИЕ(Перечисление.УПЖКХ_ВидыНачислений.Корректировка), 
		ЗНАЧЕНИЕ(Перечисление.УПЖКХ_ВидыНачислений.ПерерасчетНачисления), 
		ЗНАЧЕНИЕ(Перечисление.УПЖКХ_ВидыНачислений.КорректировкаПриОтсутствииПоказанийПоИПУ), 
		ЗНАЧЕНИЕ(Перечисление.УПЖКХ_ВидыНачислений.КорректировкаПриОтсутствииДействующегоИПУ)
		)
{ГДЕ
	Начисления.ЛицевойСчет = &amp;ЛицевойСчет}
;

////////////////////////////////////////////////////////////////////////////////
// Начисления по Показаниям счетчиков. НАЧАЛО
//
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_Начисления.Период КАК Период,
	ВТ_Начисления.Регистратор КАК Регистратор,
	ВТ_Начисления.НомерСтроки КАК НомерСтроки,
	ВТ_Начисления.ЛицевойСчет КАК ЛицевойСчет,
	ВТ_Начисления.Услуга КАК Услуга,
	ВТ_Начисления.Договор КАК Договор,
	ВТ_Начисления.УслугаОснование КАК УслугаОснование,
	ВТ_Начисления.СоставнаяУслуга КАК СоставнаяУслуга,
	ВТ_Начисления.РазделУчета КАК РазделУчета,
	ВТ_Начисления.ВидНачисления КАК ВидНачисления,
	ВТ_Начисления.ИсточникОплаты КАК ИсточникОплаты,
	ВТ_Начисления.МесяцНачисления КАК МесяцНачисления,
	ВТ_Начисления.Тариф КАК Тариф,
	ВТ_Начисления.ВидТарифа КАК ВидТарифа,
	ВТ_Начисления.МесяцРассрочки КАК МесяцРассрочки,
	ВТ_Начисления.Количество КАК Количество,
	ВТ_Начисления.УровеньРаспределения КАК УровеньРаспределения,
	ВТ_Начисления.ОснованиеКорректировки КАК ОснованиеКорректировки,
	ВТ_Начисления.ТипНачисления КАК ТипНачисления,
	ВТ_Начисления.СуммаНачисления КАК СуммаНачисления,
	ВТ_Начисления.ДнейНачислено КАК ДнейНачислено,
	ВТ_Начисления.Начало КАК Начало,
	ВТ_Начисления.Окончание КАК Окончание,
	ВТ_Начисления.Тарифность КАК Тарифность,
	ВТ_Начисления.КоличествоУчетное КАК КоличествоУчетное
ПОМЕСТИТЬ ВТ_НачисленияПоИПУ_Подготовка // По Счетчику
ИЗ
	ВТ_Начисления КАК ВТ_Начисления
ГДЕ
	ИСТИНА
	И ВТ_Начисления.ВидНачисления В (ЗНАЧЕНИЕ(Перечисление.УПЖКХ_ВидыНачислений.НачислениеПоИПУ), ЗНАЧЕНИЕ(Перечисление.УПЖКХ_ВидыНачислений.НачислениеПоОПУ))
	И ВТ_Начисления.СуммаНачисления &lt;&gt; 0
	И ВТ_Начисления.Количество &lt;&gt; 0
	И ВТ_Начисления.ВидТарифа = ЗНАЧЕНИЕ(Перечисление.КВП_ВидыТарифов.Дневной)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_Начисления.Период КАК Период,
	ВТ_Начисления.Регистратор КАК Регистратор,
	ВТ_Начисления.ЛицевойСчет КАК ЛицевойСчет,
	ВТ_Начисления.Услуга КАК Услуга,
	ВТ_Начисления.УслугаОснование КАК УслугаОснование,
	ВТ_Начисления.ВидТарифа КАК ВидТарифа,
	ВТ_Начисления.ВидНачисления КАК ВидНачисления,
	СУММА(ВТ_Начисления.Количество) КАК Количество,
	СУММА(ВТ_Начисления.СуммаНачисления) КАК СуммаНачисления,
	СУММА(ВТ_Начисления.КоличествоУчетное) КАК КоличествоУчетное
ПОМЕСТИТЬ ВТ_НачисленияПоИПУ // По Счетчику
ИЗ
	ВТ_НачисленияПоИПУ_Подготовка КАК ВТ_Начисления

СГРУППИРОВАТЬ ПО
	ВТ_Начисления.Период,
	ВТ_Начисления.Регистратор,
	ВТ_Начисления.ЛицевойСчет,
	ВТ_Начисления.Услуга,
	ВТ_Начисления.УслугаОснование,
	ВТ_Начисления.ВидТарифа,
	ВТ_Начисления.ВидНачисления
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	"Водомер" КАК Группа,
	ВТ_РасходПоПУ_Подготовка.Период КАК Период,
	ВТ_РасходПоПУ_Подготовка.Регистратор КАК Регистратор,
	ВТ_РасходПоПУ_Подготовка.ЛицевойСчет КАК ЛицевойСчет,
	ВТ_РасходПоПУ_Подготовка.Услуга КАК Услуга,
	ВТ_РасходПоПУ_Подготовка.УслугаОснование КАК УслугаОснование,
	ВТ_РасходПоПУ_Подготовка.ВидТарифа КАК ВидТарифа,
	ЗНАЧЕНИЕ(Справочник.КВП_Счетчики.ПустаяСсылка) КАК Счетчик,
	ВТ_РасходПоПУ_Подготовка.Количество КАК Расход
ПОМЕСТИТЬ ВТ_РасходПоПУ
ИЗ
	ВТ_НачисленияПоИПУ КАК ВТ_РасходПоПУ_Подготовка
;

////////////////////////////////////////////////////////////////////////////////
//
// Начисления по Показаниям счетчиков. КОНЕЦ
////////////////////////////////////////////////////////////////////////////////


////////////////////////////////////////////////////////////////////////////////
// Начисления Без показаний. НАЧАЛО
//
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_Начисления.Период КАК Период,
	ВТ_Начисления.Регистратор КАК Регистратор,
	ВТ_Начисления.НомерСтроки КАК НомерСтроки,
	ВТ_Начисления.ЛицевойСчет КАК ЛицевойСчет,
	ВТ_Начисления.Услуга КАК Услуга,
	ВТ_Начисления.Договор КАК Договор,
	ВТ_Начисления.УслугаОснование КАК УслугаОснование,
	ВТ_Начисления.СоставнаяУслуга КАК СоставнаяУслуга,
	ВТ_Начисления.РазделУчета КАК РазделУчета,
	ВТ_Начисления.ВидНачисления КАК ВидНачисления,
	ВТ_Начисления.ИсточникОплаты КАК ИсточникОплаты,
	ВТ_Начисления.МесяцНачисления КАК МесяцНачисления,
	ВТ_Начисления.Тариф КАК Тариф,
	ВТ_Начисления.ВидТарифа КАК ВидТарифа,
	ВТ_Начисления.МесяцРассрочки КАК МесяцРассрочки,
	ВТ_Начисления.Количество КАК Количество,
	ВТ_Начисления.УровеньРаспределения КАК УровеньРаспределения,
	ВТ_Начисления.ОснованиеКорректировки КАК ОснованиеКорректировки,
	ВТ_Начисления.ТипНачисления КАК ТипНачисления,
	ВТ_Начисления.СуммаНачисления КАК СуммаНачисления,
	ВТ_Начисления.ДнейНачислено КАК ДнейНачислено,
	ВТ_Начисления.Начало КАК Начало,
	ВТ_Начисления.Окончание КАК Окончание,
	ВТ_Начисления.Тарифность КАК Тарифность,
	ВТ_Начисления.КоличествоУчетное КАК КоличествоУчетное
ПОМЕСТИТЬ ВТ_НачисленияПоИПУБезПоказаний_Подготовка
ИЗ
	ВТ_Начисления КАК ВТ_Начисления
ГДЕ
	ИСТИНА
	И ВТ_Начисления.ВидНачисления В (
		ЗНАЧЕНИЕ(Перечисление.УПЖКХ_ВидыНачислений.НачислениеПриОтсутствииПоказанийИПУПоНормативу), 
		ЗНАЧЕНИЕ(Перечисление.УПЖКХ_ВидыНачислений.НачислениеПриОтсутствииДействующегоИПУПоНормативу),
		ЗНАЧЕНИЕ(Перечисление.УПЖКХ_ВидыНачислений.НачислениеПриОтсутствииДействующегоИПУПоНормативуЗаСчетПовышающегоКоэффициента))
	И ВТ_Начисления.СуммаНачисления &lt;&gt; 0
	И ВТ_Начисления.Количество &lt;&gt; 0
	И ВТ_Начисления.ВидТарифа = ЗНАЧЕНИЕ(Перечисление.КВП_ВидыТарифов.Общий)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_Начисления.Период КАК Период,
	ВТ_Начисления.Регистратор КАК Регистратор,
	ВТ_Начисления.ЛицевойСчет КАК ЛицевойСчет,
	ВТ_Начисления.Услуга КАК Услуга,
	ВТ_Начисления.УслугаОснование КАК УслугаОснование,
	ВТ_Начисления.ВидТарифа КАК ВидТарифа,
	СУММА(ВТ_Начисления.Количество) КАК Количество,
	СУММА(ВТ_Начисления.СуммаНачисления) КАК СуммаНачисления,
	СУММА(ВТ_Начисления.КоличествоУчетное) КАК КоличествоУчетное
ПОМЕСТИТЬ ВТ_НачисленияПоИПУБезПоказаний
ИЗ
	ВТ_НачисленияПоИПУБезПоказаний_Подготовка КАК ВТ_Начисления

СГРУППИРОВАТЬ ПО
	ВТ_Начисления.Период,
	ВТ_Начисления.Регистратор,
	ВТ_Начисления.ЛицевойСчет,
	ВТ_Начисления.Услуга,
	ВТ_Начисления.УслугаОснование,
	ВТ_Начисления.ВидТарифа
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	"По нормативу (без показаний)" КАК Группа,
	ВТ_НачисленияПоИПУБезПоказаний.Период КАК Период,
	ВТ_НачисленияПоИПУБезПоказаний.Регистратор КАК Регистратор,
	ВТ_НачисленияПоИПУБезПоказаний.ЛицевойСчет КАК ЛицевойСчет,
	ВТ_НачисленияПоИПУБезПоказаний.Услуга КАК Услуга,
	ВТ_НачисленияПоИПУБезПоказаний.УслугаОснование КАК УслугаОснование,
	ВТ_НачисленияПоИПУБезПоказаний.ВидТарифа КАК ВидТарифа,
	ЗНАЧЕНИЕ(Справочник.КВП_Счетчики.ПустаяСсылка) КАК Счетчик,
	ВТ_НачисленияПоИПУБезПоказаний.Количество КАК Расход
ПОМЕСТИТЬ ВТ_РасходПоПУБезПоказаний
ИЗ
	ВТ_НачисленияПоИПУБезПоказаний КАК ВТ_НачисленияПоИПУБезПоказаний
;

////////////////////////////////////////////////////////////////////////////////
//
// Начисления Без показаний. КОНЕЦ
////////////////////////////////////////////////////////////////////////////////


////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_РасходПоПУ.Группа КАК Группа,
	ВТ_РасходПоПУ.Период КАК Период,
	ВТ_РасходПоПУ.Регистратор КАК Регистратор,
	ВТ_РасходПоПУ.ЛицевойСчет КАК ЛицевойСчет,
	ВТ_РасходПоПУ.Услуга КАК Услуга,
	ЗНАЧЕНИЕ(Справочник.КВП_Услуги.ПустаяСсылка) КАК УслугаОснование,
	ВТ_РасходПоПУ.ВидТарифа КАК ВидТарифа,
	ВТ_РасходПоПУ.Счетчик КАК Счетчик,
	ВТ_РасходПоПУ.Расход КАК Расход
ПОМЕСТИТЬ ВТ_РасходОбщий
ИЗ
	ВТ_РасходПоПУ КАК ВТ_РасходПоПУ

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ВТ_РасходПоПУБезПоказаний.Группа,
	ВТ_РасходПоПУБезПоказаний.Период,
	ВТ_РасходПоПУБезПоказаний.Регистратор,
	ВТ_РасходПоПУБезПоказаний.ЛицевойСчет,
	ВТ_РасходПоПУБезПоказаний.Услуга,
	ВТ_РасходПоПУБезПоказаний.УслугаОснование,
	ВТ_РасходПоПУБезПоказаний.ВидТарифа,
	ВТ_РасходПоПУБезПоказаний.Счетчик,
	ВТ_РасходПоПУБезПоказаний.Расход
ИЗ
	ВТ_РасходПоПУБезПоказаний КАК ВТ_РасходПоПУБезПоказаний
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗЛИЧНЫЕ
	ЕСТЬNULL(СведенияДляВзаиморасчетовПоЛС.ЛицевойСчет, Собственники.ЛицевойСчет) КАК ЛицевойСчет,
	ЕСТЬNULL(СведенияДляВзаиморасчетовПоЛС.Контрагент, Собственники.ОтветственныйВладелец) КАК Контрагент,
	ЕСТЬNULL(СведенияДляВзаиморасчетовПоЛС.Договор, ЗНАЧЕНИЕ(Справочник.ДоговорыКонтрагентов.ПустаяСсылка)) КАК Договор
ПОМЕСТИТЬ ВТ_КонтрагентыЛС
ИЗ
	РегистрСведений.УПЖКХ_СведенияДляВзаиморасчетовПоЛС.СрезПоследних(&amp;КонецПериода) КАК СведенияДляВзаиморасчетовПоЛС
	ПОЛНОЕ СОЕДИНЕНИЕ РегистрСведений.УПЖКХ_ОтветственныйСобственникНанимательЛицевогоСчета КАК Собственники
	ПО СведенияДляВзаиморасчетовПоЛС.Организация = &amp;Организация
	И СведенияДляВзаиморасчетовПоЛС.ЛицевойСчет = Собственники.ЛицевойСчет
	И Собственники.ОтветственныйВладелец ССЫЛКА Справочник.Контрагенты
ГДЕ
	ИСТИНА
	И СведенияДляВзаиморасчетовПоЛС.ЛицевойСчет В (ВЫБРАТЬ Т.ЛицевойСчет ИЗ ВТ_РасходОбщий КАК Т)
	И Собственники.ЛицевойСчет В (ВЫБРАТЬ Т.ЛицевойСчет ИЗ ВТ_РасходОбщий КАК Т)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_РасходОбщий.Группа КАК Группа,
	ВТ_РасходОбщий.Период КАК Период,
	ВТ_РасходОбщий.Регистратор КАК Регистратор,
	ВТ_РасходОбщий.ЛицевойСчет КАК ЛицевойСчет,
	ВТ_РасходОбщий.УслугаОснование КАК УслугаОснование,
	ВТ_РасходОбщий.Услуга КАК Услуга,
	ВТ_РасходОбщий.Услуга.Услуга КАК Номенклатура,
	ВТ_РасходОбщий.Услуга.Услуга.НоменклатурнаяГруппа КАК НоменклатурнаяГруппа,
	ВТ_РасходОбщий.Услуга.ВидУслуги КАК ВидУслуги,
	ВТ_РасходОбщий.ВидТарифа КАК ВидТарифа,
	ВТ_РасходОбщий.Счетчик КАК Счетчик,
	ВТ_РасходОбщий.Расход КАК Расход,
	ЕСТЬNULL(ВТ_КонтрагентыЛС.Контрагент, ЗНАЧЕНИЕ(Справочник.Контрагенты.ПустаяСсылка)) КАК Контрагент,
	ЕСТЬNULL(ВТ_КонтрагентыЛС.Договор, ЗНАЧЕНИЕ(Справочник.ДоговорыКонтрагентов.ПустаяСсылка)) КАК Договор
ПОМЕСТИТЬ ВТ_РезультатДляКонтроля // Для контроля
ИЗ
	ВТ_РасходОбщий КАК ВТ_РасходОбщий
	ЛЕВОЕ СОЕДИНЕНИЕ ВТ_КонтрагентыЛС КАК ВТ_КонтрагентыЛС
	ПО ВТ_РасходОбщий.ЛицевойСчет = ВТ_КонтрагентыЛС.ЛицевойСчет
;

////////////////////////////////////////////////////////////////////////////////
// КОНТРОЛЬ
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ ПЕРВЫЕ 1
	СУММА(ВТ_Начисления.Количество) КАК КоличествоПоНачислениям
ПОМЕСТИТЬ ВТ_ОбщиеИтогиНачислений
ИЗ
	ВТ_Начисления КАК ВТ_Начисления
ГДЕ
	ВТ_Начисления.СуммаНачисления &lt;&gt; 0
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ ПЕРВЫЕ 1
	СУММА(ВТ_РезультатДляКонтроля.Расход) КАК КоличествоПоОтчету
ПОМЕСТИТЬ ВТ_ОбщиеИтогиОтчета
ИЗ
	ВТ_РезультатДляКонтроля КАК ВТ_РезультатДляКонтроля
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ ПЕРВЫЕ 1
	ЕСТЬNULL(ВТ_ОбщиеИтогиНачислений.КоличествоПоНачислениям, 0) КАК ОбщееКоличествоПоНачислениям,
	ЕСТЬNULL(ВТ_ОбщиеИтогиОтчета.КоличествоПоОтчету, 0) КАК ОбщееКоличествоПоОтчету
ПОМЕСТИТЬ ВТ_Контроль
ИЗ
	ВТ_ОбщиеИтогиНачислений КАК ВТ_ОбщиеИтогиНачислений
	ПОЛНОЕ СОЕДИНЕНИЕ ВТ_ОбщиеИтогиОтчета КАК ВТ_ОбщиеИтогиОтчета
	ПО ИСТИНА
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_РезультатДляКонтроля.Группа КАК Группа,
	ВТ_РезультатДляКонтроля.Период КАК Период,
	ВТ_РезультатДляКонтроля.Регистратор КАК Регистратор,
	ВТ_РезультатДляКонтроля.Контрагент КАК Контрагент,
	ВТ_РезультатДляКонтроля.Договор КАК Договор,
	ВТ_РезультатДляКонтроля.ЛицевойСчет КАК ЛицевойСчет,
	ВТ_РезультатДляКонтроля.Услуга КАК Услуга,
	ВТ_РезультатДляКонтроля.УслугаОснование КАК УслугаОснование,
	ВТ_РезультатДляКонтроля.Услуга.Услуга КАК Номенклатура,
	ВТ_РезультатДляКонтроля.Услуга.Услуга.НоменклатурнаяГруппа КАК НоменклатурнаяГруппа,
	ВТ_РезультатДляКонтроля.Услуга.ВидУслуги КАК ВидУслуги,
	ВТ_РезультатДляКонтроля.ВидТарифа КАК ВидТарифа,
	ВТ_РезультатДляКонтроля.Счетчик КАК Счетчик,
	ВТ_РезультатДляКонтроля.Расход КАК Расход,
	ВТ_Контроль.ОбщееКоличествоПоНачислениям КАК ОбщееКоличествоПоНачислениям, // Для контроля
	ВТ_Контроль.ОбщееКоличествоПоОтчету КАК ОбщееКоличествоПоОтчету, // Для контроля
	АВТОНОМЕРЗАПИСИ() КАК ВременныйИдентификаторСтроки
ПОМЕСТИТЬ ВТ_ОбщийРасходПоФактическимДанным
ИЗ
	ВТ_РезультатДляКонтроля КАК ВТ_РезультатДляКонтроля
	ЛЕВОЕ СОЕДИНЕНИЕ ВТ_Контроль КАК ВТ_Контроль
	ПО ИСТИНА
;


////////////////////////////////////////////////////////////////////////////////
// Удаление временных таблиц
УНИЧТОЖИТЬ ВТ_ОбщиеИтогиНачислений;
УНИЧТОЖИТЬ ВТ_ОбщиеИтогиОтчета;
УНИЧТОЖИТЬ ВТ_Контроль;
УНИЧТОЖИТЬ ВТ_РезультатДляКонтроля;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	УчетКоличестваЖильцовПоЛицевымСчетам.Период КАК Период,
	УчетКоличестваЖильцовПоЛицевымСчетам.ЛицевойСчет КАК ЛицевойСчет,
	УчетКоличестваЖильцовПоЛицевымСчетам.КоличествоПроживающих КАК КоличествоПроживающих,
	УчетКоличестваЖильцовПоЛицевымСчетам.КоличествоЗарегистрированных КАК КоличествоЗарегистрированных
ПОМЕСТИТЬ ВТ_УчетКоличестваЖильцовПоЛицевымСчетам
ИЗ
	РегистрСведений.КВП_УчетКоличестваЖильцовПоЛицевымСчетам.СрезПоследних(КОНЕЦПЕРИОДА(&amp;КонецПериода, МЕСЯЦ), 
		ЛицевойСчет В (ВЫБРАТЬ РАЗЛИЧНЫЕ Т.ЛицевойСчет ИЗ ВТ_ОбщийРасходПоФактическимДанным КАК Т)) КАК УчетКоличестваЖильцовПоЛицевымСчетам
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	*
ПОМЕСТИТЬ ВТ_ФактическийРасходОсновныхУслугПоИПУ
ИЗ
	ВТ_ОбщийРасходПоФактическимДанным КАК ВТ_ОбщийРасходПоФактическимДанным
;

ВЫБРАТЬ
	НормыПотребленияУслугЛС.*,
	НормыПотребленияУслугЛС.НормаПотребления.НормаНаЛицевойСчет КАК НормаНаЛицевойСчет,
	ВЫБОР
		КОГДА НормыПотребленияУслугЛС.НормаПотребления.Основание = ЗНАЧЕНИЕ(Перечисление.КВП_ОснованияНормПотребления.ОдинЧеловек) ТОГДА
			ВЫБОР
				КОГДА НормыПотребленияУслугЛС.НормаПотребления.ВидЖильцов = ЗНАЧЕНИЕ(Перечисление.УПЖКХ_ВидыЖильцов.Зарегистрированные)
					ТОГДА НормыПотребленияУслугЛС.НормаПотребления.Размер * ЕСТЬNULL(ВТ_УчетКоличестваЖильцовПоЛицевымСчетам.КоличествоЗарегистрированных, 0)
				ИНАЧЕ
					НормыПотребленияУслугЛС.НормаПотребления.Размер * ЕСТЬNULL(ВТ_УчетКоличестваЖильцовПоЛицевымСчетам.КоличествоПроживающих, 0)
			КОНЕЦ
		ИНАЧЕ
			НормыПотребленияУслугЛС.НормаПотребления.Размер
	КОНЕЦ КАК Размер,
	НормыПотребленияУслугЛС.НормаПотребления.Размер КАК Норма
ПОМЕСТИТЬ ВТ_НормыПотребленияОсновныхУслугЛС
ИЗ
	РегистрСведений.КВП_НормыПотребленияУслугЛС.СрезПоследних(КОНЕЦПЕРИОДА(&amp;КонецПериода, МЕСЯЦ)) КАК НормыПотребленияУслугЛС
	ЛЕВОЕ СОЕДИНЕНИЕ ВТ_УчетКоличестваЖильцовПоЛицевымСчетам КАК ВТ_УчетКоличестваЖильцовПоЛицевымСчетам
	ПО НормыПотребленияУслугЛС.ЛицевойСчет = ВТ_УчетКоличестваЖильцовПоЛицевымСчетам.ЛицевойСчет
ГДЕ
	ИСТИНА
	И НормыПотребленияУслугЛС.НормаПотребления.НормаНаЛицевойСчет = ИСТИНА
	И (НормыПотребленияУслугЛС.ЛицевойСчет, Услуга) В (
		ВЫБРАТЬ Т.ЛицевойСчет, Т.Услуга 
		ИЗ ВТ_ОбщийРасходПоФактическимДанным КАК Т
		ГДЕ 
			Т.Группа &lt;&gt; "По нормативу (без показаний)"
			И Т.УслугаОснование = ЗНАЧЕНИЕ(Справочник.КВП_Услуги.ПустаяСсылка)
		)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_ФактическийРасходОсновныхУслугПоИПУ.*,
	ЕСТЬNULL(ВТ_НормыПотребленияОсновныхУслугЛС.Норма, 0) КАК Норма,
	ЕСТЬNULL(ВТ_НормыПотребленияОсновныхУслугЛС.Размер, 0) КАК Норматив
ПОМЕСТИТЬ ВТ_РасходОсновныхУслугПоПУНормы_Подготовка
ИЗ
	ВТ_ФактическийРасходОсновныхУслугПоИПУ КАК ВТ_ФактическийРасходОсновныхУслугПоИПУ
	ЛЕВОЕ СОЕДИНЕНИЕ ВТ_НормыПотребленияОсновныхУслугЛС КАК ВТ_НормыПотребленияОсновныхУслугЛС
	ПО ВТ_ФактическийРасходОсновныхУслугПоИПУ.ЛицевойСчет = ВТ_НормыПотребленияОсновныхУслугЛС.ЛицевойСчет
	И ВТ_ФактическийРасходОсновныхУслугПоИПУ.Услуга = ВТ_НормыПотребленияОсновныхУслугЛС.Услуга
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_РасходОсновныхУслугПоПУНормы_Подготовка.Группа КАК Группа,
	КОНЕЦПЕРИОДА(ВТ_РасходОсновныхУслугПоПУНормы_Подготовка.Период, МЕСЯЦ) КАК Период,
	МАКСИМУМ(ВТ_РасходОсновныхУслугПоПУНормы_Подготовка.Регистратор) КАК Регистратор,
	МАКСИМУМ(ВТ_РасходОсновныхУслугПоПУНормы_Подготовка.Контрагент) КАК Контрагент,
	МАКСИМУМ(ВТ_РасходОсновныхУслугПоПУНормы_Подготовка.Договор) КАК Договор,
	ВТ_РасходОсновныхУслугПоПУНормы_Подготовка.ЛицевойСчет КАК ЛицевойСчет,
	ВТ_РасходОсновныхУслугПоПУНормы_Подготовка.Услуга КАК Услуга,
	ЗНАЧЕНИЕ(Справочник.КВП_Услуги.ПустаяСсылка) КАК УслугаОснование,
	ВТ_РасходОсновныхУслугПоПУНормы_Подготовка.Номенклатура КАК Номенклатура,
	ВТ_РасходОсновныхУслугПоПУНормы_Подготовка.НоменклатурнаяГруппа КАК НоменклатурнаяГруппа,
	ВТ_РасходОсновныхУслугПоПУНормы_Подготовка.ВидУслуги КАК ВидУслуги,
	МАКСИМУМ(ВТ_РасходОсновныхУслугПоПУНормы_Подготовка.ВидТарифа) КАК ВидТарифа,
	СУММА(ВТ_РасходОсновныхУслугПоПУНормы_Подготовка.Расход) КАК Расход,
	МАКСИМУМ(ВТ_РасходОсновныхУслугПоПУНормы_Подготовка.Норматив) КАК НормативныйРасход,
	МАКСИМУМ(ВТ_РасходОсновныхУслугПоПУНормы_Подготовка.Норма) КАК Норма
ПОМЕСТИТЬ ВТ_РасходОсновныхУслугПоПУНормы
ИЗ
	ВТ_РасходОсновныхУслугПоПУНормы_Подготовка КАК ВТ_РасходОсновныхУслугПоПУНормы_Подготовка

СГРУППИРОВАТЬ ПО
	ВТ_РасходОсновныхУслугПоПУНормы_Подготовка.Группа,
	КОНЕЦПЕРИОДА(ВТ_РасходОсновныхУслугПоПУНормы_Подготовка.Период, МЕСЯЦ),
	ВТ_РасходОсновныхУслугПоПУНормы_Подготовка.ЛицевойСчет,
	ВТ_РасходОсновныхУслугПоПУНормы_Подготовка.Услуга,
	ВТ_РасходОсновныхУслугПоПУНормы_Подготовка.Номенклатура,
	ВТ_РасходОсновныхУслугПоПУНормы_Подготовка.НоменклатурнаяГруппа,
	ВТ_РасходОсновныхУслугПоПУНормы_Подготовка.ВидУслуги
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_ОбщийРасходПоФактическимДанным.Группа КАК Группа,
	ВТ_ОбщийРасходПоФактическимДанным.Период КАК Период,
	ВТ_ОбщийРасходПоФактическимДанным.Регистратор КАК Регистратор,
	ВТ_ОбщийРасходПоФактическимДанным.Контрагент КАК Контрагент,
	ВТ_ОбщийРасходПоФактическимДанным.Договор КАК Договор,
	ВТ_ОбщийРасходПоФактическимДанным.ЛицевойСчет КАК ЛицевойСчет,
	ВТ_ОбщийРасходПоФактическимДанным.Услуга КАК Услуга,
	ВТ_ОбщийРасходПоФактическимДанным.УслугаОснование КАК УслугаОснование,
	ВТ_ОбщийРасходПоФактическимДанным.Услуга.Услуга КАК Номенклатура,
	ВТ_ОбщийРасходПоФактическимДанным.Услуга.Услуга.НоменклатурнаяГруппа КАК НоменклатурнаяГруппа,
	ВТ_ОбщийРасходПоФактическимДанным.Услуга.ВидУслуги КАК ВидУслуги,
	ВТ_ОбщийРасходПоФактическимДанным.ВидТарифа КАК ВидТарифа,
	ВТ_ОбщийРасходПоФактическимДанным.Расход КАК Расход,
	ВТ_ОбщийРасходПоФактическимДанным.НормативныйРасход КАК НормативныйРасход,
	ВТ_ОбщийРасходПоФактическимДанным.Норма КАК Норма
ПОМЕСТИТЬ ВТ_Результат_Начисления
ИЗ
	ВТ_РасходОсновныхУслугПоПУНормы КАК ВТ_ОбщийРасходПоФактическимДанным
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗЛИЧНЫЕ
	ВТ_ОбщийРасходПоФактическимДанным.ЛицевойСчет КАК ЛицевойСчет,
	"По среднему" КАК УточненнаяГруппа
ПОМЕСТИТЬ ВТ_УточненияГрупп
ИЗ
	ВТ_ОбщийРасходПоФактическимДанным КАК ВТ_ОбщийРасходПоФактическимДанным
ГДЕ
	(ЛицевойСчет, Услуга) В (ВЫБРАТЬ Т.ЛицевойСчет, Т.Услуга ИЗ ВТ_ЛицевыеСчетаБезСПасходомТолькоЗаПериодРасчета КАК Т)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
    ДинамическиеПоказателиЛицевыхСчетов.ЛицевойСчет КАК ЛицевойСчет,
    ДинамическиеПоказателиЛицевыхСчетов.Водозабор КАК Водозабор,
    ДинамическиеПоказателиЛицевыхСчетов.Контролер КАК Контролер,
    ДинамическиеПоказателиЛицевыхСчетов.Контролер КАК Договородержатель,
    ДинамическиеПоказателиЛицевыхСчетов.Финансирование КАК Финансирование,
    ДинамическиеПоказателиЛицевыхСчетов.ВидПотребления КАК ВидПотребления,
    ДинамическиеПоказателиЛицевыхСчетов.Характеристика КАК Характеристика
ПОМЕСТИТЬ ВТ_ДинамическиеПоказателиЛицевыхСчетов
ИЗ
    РегистрСведений.lc_ДинамическиеПоказателиЛицевыхСчетов.СрезПоследних(&amp;КонецПериода) КАК ДинамическиеПоказателиЛицевыхСчетов
    // ВТ_ДинамическиеПоказателиЛицевыхСчетов КАК ДинамическиеПоказателиЛицевыхСчетов
{ГДЕ
	ДинамическиеПоказателиЛицевыхСчетов.ЛицевойСчет = &amp;ЛицевойСчет
}
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ЕСТЬNULL(ВТ_УточненияГрупп.УточненнаяГруппа, ВТ_Результат_Начисления.Группа) КАК Группа,
	ВТ_Результат_Начисления.Период КАК Период,
	ВТ_Результат_Начисления.Регистратор КАК Регистратор,
	ВТ_Результат_Начисления.Контрагент КАК Контрагент,
	ВТ_Результат_Начисления.Договор КАК Договор,
	ВТ_Результат_Начисления.ЛицевойСчет КАК ЛицевойСчет,
	ВТ_Результат_Начисления.Услуга КАК Услуга,
	ВТ_Результат_Начисления.УслугаОснование КАК УслугаОснование,
	ВТ_Результат_Начисления.Услуга.Услуга КАК Номенклатура,
	ВТ_Результат_Начисления.Услуга.Услуга.НоменклатурнаяГруппа КАК НоменклатурнаяГруппа,
	ВТ_Результат_Начисления.Услуга.ВидУслуги КАК ВидУслуги,
	ВТ_Результат_Начисления.ВидТарифа КАК ВидТарифа,
	ВТ_Результат_Начисления.Расход КАК Расход,
	ВТ_Результат_Начисления.НормативныйРасход КАК НормативныйРасход,
	ВТ_Результат_Начисления.Норма КАК Норма,
	ЕСТЬNULL(ВТ_УчетКоличестваЖильцовПоЛицевымСчетам.КоличествоПроживающих, 0) КАК КоличествоПроживающих,
	ЕСТЬNULL(ВТ_УчетКоличестваЖильцовПоЛицевымСчетам.КоличествоЗарегистрированных, 0) КАК КоличествоЗарегистрированных,
    ВТ_ДинамическиеПоказателиЛицевыхСчетов.Водозабор КАК Водозабор,
    ВТ_ДинамическиеПоказателиЛицевыхСчетов.Контролер КАК Контролер,
    ВТ_ДинамическиеПоказателиЛицевыхСчетов.Контролер КАК Договородержатель,
    ВТ_ДинамическиеПоказателиЛицевыхСчетов.Финансирование КАК Финансирование,
    ВТ_ДинамическиеПоказателиЛицевыхСчетов.ВидПотребления КАК ВидПотребления,
    ВТ_ДинамическиеПоказателиЛицевыхСчетов.Характеристика КАК Характеристика,
    "Общие данные" КАК ЗаголовокОбщихДанных
{ВЫБРАТЬ
    Группа КАК Группа,
	Период КАК Период,
	Регистратор.* КАК Регистратор,
	Контрагент.* КАК Контрагент,
	Договор.* КАК Договор,
	ЛицевойСчет.* КАК ЛицевойСчет,
	Услуга.* КАК Услуга,
	УслугаОснование.* КАК УслугаОснование,
	Номенклатура.* КАК Номенклатура,
	НоменклатурнаяГруппа.* КАК НоменклатурнаяГруппа,
	ВидУслуги.* КАК ВидУслуги,
	ВидТарифа.* КАК ВидТарифа,
	Расход КАК Расход,
	НормативныйРасход КАК НормативныйРасход,
	Норма КАК Норма,
	КоличествоПроживающих,
	КоличествоЗарегистрированных,
    ЛицевойСчет.*,
    Водозабор.*,
    Контролер.*,
    Договородержатель.*,
    Финансирование.*,
    ВидПотребления.*,
    Характеристика.*,
    ЗаголовокОбщихДанных}
ИЗ
	ВТ_Результат_Начисления КАК ВТ_Результат_Начисления
	ЛЕВОЕ СОЕДИНЕНИЕ ВТ_УточненияГрупп КАК ВТ_УточненияГрупп
		ПО  ВТ_Результат_Начисления.ЛицевойСчет = ВТ_УточненияГрупп.ЛицевойСчет
	ЛЕВОЕ СОЕДИНЕНИЕ ВТ_УчетКоличестваЖильцовПоЛицевымСчетам КАК ВТ_УчетКоличестваЖильцовПоЛицевымСчетам
		ПО ВТ_Результат_Начисления.ЛицевойСчет = ВТ_УчетКоличестваЖильцовПоЛицевымСчетам.ЛицевойСчет
	ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ДинамическиеПоказателиЛицевыхСчетов КАК ВТ_ДинамическиеПоказателиЛицевыхСчетов
		ПО  ВТ_Результат_Начисления.ЛицевойСчет = ВТ_ДинамическиеПоказателиЛицевыхСчетов.ЛицевойСчет
	
ГДЕ
    ВТ_Результат_Начисления.Расход &lt;&gt; 0
    И ВТ_Результат_Начисления.ЛицевойСчет В (ВЫБРАТЬ РАЗЛИЧНЫЕ Т.ЛицевойСчет ИЗ ВТ_ДинамическиеПоказателиЛицевыхСчетов КАК Т)
{ГДЕ
    ВТ_Результат_Начисления.Контрагент В (&amp;Контрагенты),
	ВТ_Результат_Начисления.Договор В (&amp;Договоры),
	ВТ_Результат_Начисления.ЛицевойСчет = &amp;ЛицевойСчет,
	ВТ_Результат_Начисления.Группа,
	ВТ_Результат_Начисления.Период,
	ВТ_Результат_Начисления.Регистратор.*,
	ВТ_Результат_Начисления.Контрагент.*,
	ВТ_Результат_Начисления.Договор.*,
	ВТ_Результат_Начисления.ЛицевойСчет.*,
	ВТ_Результат_Начисления.Услуга.*,
	ВТ_Результат_Начисления.УслугаОснование.*,
	ВТ_Результат_Начисления.Номенклатура.*,
	ВТ_Результат_Начисления.НоменклатурнаяГруппа.*,
	ВТ_Результат_Начисления.ВидУслуги.*,
	ВТ_Результат_Начисления.ВидТарифа.*,
	ВТ_Результат_Начисления.Расход,
	ВТ_Результат_Начисления.НормативныйРасход,
	ВТ_УчетКоличестваЖильцовПоЛицевымСчетам.КоличествоПроживающих,
	ВТ_УчетКоличестваЖильцовПоЛицевымСчетам.КоличествоЗарегистрированных,
    ВТ_ДинамическиеПоказателиЛицевыхСчетов.Водозабор = &amp;Водозабор,
    ВТ_ДинамическиеПоказателиЛицевыхСчетов.Контролер = &amp;Контролер,
    ВТ_ДинамическиеПоказателиЛицевыхСчетов.Договородержатель = &amp;Договородержатель,
    ВТ_ДинамическиеПоказателиЛицевыхСчетов.Финансирование = &amp;Финансирование,
    ВТ_ДинамическиеПоказателиЛицевыхСчетов.Характеристика = &amp;Характеристика,
    ВТ_ДинамическиеПоказателиЛицевыхСчетов.ВидПотребления В ИЕРАРХИИ (&amp;ВидПотребления),
    ВТ_ДинамическиеПоказателиЛицевыхСчетов.Водозабор.*,
    ВТ_ДинамическиеПоказателиЛицевыхСчетов.Контролер.*,
    ВТ_ДинамическиеПоказателиЛицевыхСчетов.Договородержатель.*,
    ВТ_ДинамическиеПоказателиЛицевыхСчетов.Финансирование.*,
    ВТ_ДинамическиеПоказателиЛицевыхСчетов.Характеристика.*,
    ВТ_ДинамическиеПоказателиЛицевыхСчетов.ВидПотребления.*
}
</query>
		<autoFillFields>false</autoFillFields>
	</dataSet>
	<totalField>
		<dataPath>КоличествоЗарегистрированных</dataPath>
		<expression>ГП_РаботаСОтчетами.РасчитатьСуммуЖильцовПоЛицевымСчетам(ВычислитьВыражениеСГруппировкойТаблицаЗначений("ВЫРАЗИТЬ(ЛицевойСчет, ""Справочник.КВП_ЛицевыеСчета"") КАК ЛицевойСчет, ВЫРАЗИТЬ(КоличествоЗарегистрированных, ""ЧИСЛО(21,6)"") КАК КоличествоЗарегистрированных"), "КоличествоЗарегистрированных")</expression>
	</totalField>
	<totalField>
		<dataPath>КоличествоПроживающих</dataPath>
		<expression>ГП_РаботаСОтчетами.РасчитатьСуммуЖильцовПоЛицевымСчетам(ВычислитьВыражениеСГруппировкойТаблицаЗначений("ВЫРАЗИТЬ(ЛицевойСчет, ""Справочник.КВП_ЛицевыеСчета"") КАК ЛицевойСчет, ВЫРАЗИТЬ(КоличествоПроживающих, ""ЧИСЛО(21,6)"") КАК КоличествоПроживающих"), "КоличествоПроживающих")</expression>
	</totalField>
	<totalField>
		<dataPath>Норма</dataPath>
		<expression>Сумма(Норма)</expression>
	</totalField>
	<totalField>
		<dataPath>НормативныйРасход</dataPath>
		<expression>Сумма(НормативныйРасход)</expression>
	</totalField>
	<totalField>
		<dataPath>Расход</dataPath>
		<expression>Сумма(Расход)</expression>
	</totalField>
	<totalField>
		<dataPath>КоличествоЗарегистрированных</dataPath>
		<expression>Максимум(КоличествоЗарегистрированных)</expression>
		<group>ЛицевойСчет</group>
	</totalField>
	<totalField>
		<dataPath>КоличествоПроживающих</dataPath>
		<expression>Максимум(КоличествоПроживающих)</expression>
		<group>ЛицевойСчет</group>
	</totalField>
	<parameter>
		<name>ПериодОтчета</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Период отчета</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>v8:StandardPeriod</v8:Type>
		</valueType>
		<value xsi:type="v8:StandardPeriod">
			<v8:variant xsi:type="v8:StandardPeriodVariant">Custom</v8:variant>
			<v8:startDate>0001-01-01T00:00:00</v8:startDate>
			<v8:endDate>0001-01-01T00:00:00</v8:endDate>
		</value>
		<useRestriction>false</useRestriction>
		<denyIncompleteValues>true</denyIncompleteValues>
		<use>Always</use>
	</parameter>
	<parameter>
		<name>Организация</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Организация</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.Организации</v8:Type>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>false</useRestriction>
		<denyIncompleteValues>true</denyIncompleteValues>
		<use>Always</use>
	</parameter>
	<parameter>
		<name>Контрагенты</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Контрагенты</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.Контрагенты</v8:Type>
		</valueType>
		<useRestriction>false</useRestriction>
		<valueListAllowed>true</valueListAllowed>
	</parameter>
	<parameter>
		<name>Договоры</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Договоры</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.ДоговорыКонтрагентов</v8:Type>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>false</useRestriction>
		<valueListAllowed>true</valueListAllowed>
		<inputParameters>
			<dcscor:item>
				<dcscor:parameter>СвязиПараметровВыбора</dcscor:parameter>
				<dcscor:value xsi:type="dcscor:ChoiceParameterLinks">
					<dcscor:item>
						<dcscor:choiceParameter>Отбор.Владелец</dcscor:choiceParameter>
						<dcscor:value>ПараметрыДанных.Контрагенты</dcscor:value>
						<dcscor:mode xmlns:d7p1="http://v8.1c.ru/8.1/data/enterprise" xsi:type="d7p1:LinkedValueChangeMode">Clear</dcscor:mode>
					</dcscor:item>
				</dcscor:value>
			</dcscor:item>
		</inputParameters>
	</parameter>
	<parameter>
		<name>ВидПотребления</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Группа потребителей</v8:content>
			</v8:item>
		</title>
		<value xsi:nil="true"/>
		<useRestriction>false</useRestriction>
	</parameter>
	<parameter>
		<name>Водозабор</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Водозабор</v8:content>
			</v8:item>
		</title>
		<value xsi:nil="true"/>
		<useRestriction>false</useRestriction>
	</parameter>
	<parameter>
		<name>Договородержатель</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Договородержатель</v8:content>
			</v8:item>
		</title>
		<value xsi:nil="true"/>
		<useRestriction>false</useRestriction>
	</parameter>
	<parameter>
		<name>Контролер</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Контролер</v8:content>
			</v8:item>
		</title>
		<value xsi:nil="true"/>
		<useRestriction>false</useRestriction>
	</parameter>
	<parameter>
		<name>ЛицевойСчет</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Лицевой счет</v8:content>
			</v8:item>
		</title>
		<value xsi:nil="true"/>
		<useRestriction>false</useRestriction>
	</parameter>
	<parameter>
		<name>Финансирование</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Способ финансирования</v8:content>
			</v8:item>
		</title>
		<value xsi:nil="true"/>
		<useRestriction>false</useRestriction>
	</parameter>
	<parameter>
		<name>Характеристика</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Характеристика</v8:content>
			</v8:item>
		</title>
		<value xsi:nil="true"/>
		<useRestriction>false</useRestriction>
	</parameter>
	<parameter>
		<name>НачалоПериода</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Начало периода</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<availableAsField>false</availableAsField>
		<use>Always</use>
	</parameter>
	<parameter>
		<name>КонецПериода</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Конец периода</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<availableAsField>false</availableAsField>
		<use>Always</use>
	</parameter>
	<parameter>
		<name>НачалоПериодаГраница</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Начало периода граница</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<availableAsField>false</availableAsField>
		<use>Always</use>
	</parameter>
	<parameter>
		<name>КонецПериодаГраница</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Конец периода граница</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<availableAsField>false</availableAsField>
		<use>Always</use>
	</parameter>
	<parameter>
		<name>Период</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Период</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<expression>&amp;ПериодОтчета.ДатаОкончания</expression>
		<availableAsField>false</availableAsField>
	</parameter>
	<settingsVariant>
		<dcsset:name>Основной</dcsset:name>
		<dcsset:presentation xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Потребление услуг по нормативам за период</v8:content>
			</v8:item>
		</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:selection>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Группа</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Период</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Регистратор</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Договор</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Контрагент</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ЛицевойСчет</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ВидТарифа</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Расход</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>НормативныйРасход</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Услуга</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>УслугаОснование</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>КоличествоЗарегистрированных</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>КоличествоПроживающих</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Норма</dcsset:field>
				</dcsset:item>
			</dcsset:selection>
			<dcsset:dataParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>ПериодОтчета</dcscor:parameter>
					<dcscor:value xsi:type="v8:StandardPeriod">
						<v8:variant xsi:type="v8:StandardPeriodVariant">Custom</v8:variant>
						<v8:startDate>0001-01-01T00:00:00</v8:startDate>
						<v8:endDate>0001-01-01T00:00:00</v8:endDate>
					</dcscor:value>
					<dcsset:userSettingID>8cfa9b52-aff6-4566-af4f-09fe4fbd4483</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>Организация</dcscor:parameter>
					<dcscor:value xsi:nil="true"/>
					<dcsset:userSettingID>54a620cb-729b-45b3-89ce-806d21b7f33f</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>Контрагенты</dcscor:parameter>
					<dcscor:value xsi:nil="true"/>
					<dcsset:userSettingID>d0d8f290-d068-4f32-8483-8245c11ca525</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>Договоры</dcscor:parameter>
					<dcscor:value xsi:nil="true"/>
					<dcsset:userSettingID>d27d5ff0-9520-4190-bd7c-8aece976d71a</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>ВидПотребления</dcscor:parameter>
					<dcscor:value xsi:nil="true"/>
					<dcsset:userSettingID>5701db46-9adc-44d4-9a10-7b8850433594</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>Водозабор</dcscor:parameter>
					<dcscor:value xsi:nil="true"/>
					<dcsset:userSettingID>2510f857-f5e6-4dd1-aebf-9ac2069aadda</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>Договородержатель</dcscor:parameter>
					<dcscor:value xsi:nil="true"/>
					<dcsset:userSettingID>a0f18089-40dc-4003-8ed1-3c035466fcb4</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>Контролер</dcscor:parameter>
					<dcscor:value xsi:nil="true"/>
					<dcsset:userSettingID>d698b138-aada-46b6-ac78-33da1e806e18</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>ЛицевойСчет</dcscor:parameter>
					<dcscor:value xsi:nil="true"/>
					<dcsset:userSettingID>7470557d-0039-4314-b13c-8a386f6d6b15</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>Финансирование</dcscor:parameter>
					<dcscor:value xsi:nil="true"/>
					<dcsset:userSettingID>ff5bcd33-5ece-491a-9a87-08d0d4de703d</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>Характеристика</dcscor:parameter>
					<dcscor:value xsi:nil="true"/>
					<dcsset:userSettingID>13b0149a-9f16-44ca-a116-723b8c274247</dcsset:userSettingID>
				</dcscor:item>
			</dcsset:dataParameters>
			<dcsset:order>
				<dcsset:item xsi:type="dcsset:OrderItemField">
					<dcsset:field>Группа</dcsset:field>
					<dcsset:orderType>Asc</dcsset:orderType>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:OrderItemField">
					<dcsset:field>Договор</dcsset:field>
					<dcsset:orderType>Asc</dcsset:orderType>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:OrderItemField">
					<dcsset:field>Контрагент</dcsset:field>
					<dcsset:orderType>Asc</dcsset:orderType>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:OrderItemField">
					<dcsset:field>НоменклатурнаяГруппа</dcsset:field>
					<dcsset:orderType>Asc</dcsset:orderType>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:OrderItemField">
					<dcsset:field>Расход</dcsset:field>
					<dcsset:orderType>Asc</dcsset:orderType>
				</dcsset:item>
			</dcsset:order>
			<dcsset:item xsi:type="dcsset:StructureItemTable">
				<dcsset:column>
					<dcsset:groupItems>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>ЗаголовокОбщихДанных</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
					</dcsset:groupItems>
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemAuto">
							<dcsset:use>false</dcsset:use>
						</dcsset:item>
					</dcsset:order>
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemAuto">
							<dcsset:use>false</dcsset:use>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:SelectedItemField">
							<dcsset:field>ЗаголовокОбщихДанных</dcsset:field>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:SelectedItemFolder">
							<dcsset:lwsTitle>
								<v8:item>
									<v8:lang>ru</v8:lang>
									<v8:content>Кол. жильцов:</v8:content>
								</v8:item>
							</dcsset:lwsTitle>
							<dcsset:item xsi:type="dcsset:SelectedItemField">
								<dcsset:field>КоличествоПроживающих</dcsset:field>
							</dcsset:item>
							<dcsset:item xsi:type="dcsset:SelectedItemField">
								<dcsset:use>false</dcsset:use>
								<dcsset:field>КоличествоЗарегистрированных</dcsset:field>
							</dcsset:item>
							<dcsset:placement>Vertically</dcsset:placement>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:SelectedItemField">
							<dcsset:field>Норма</dcsset:field>
						</dcsset:item>
					</dcsset:selection>
					<dcsset:conditionalAppearance>
						<dcsset:item>
							<dcsset:selection>
								<dcsset:item>
									<dcsset:field>КоличествоПроживающих</dcsset:field>
								</dcsset:item>
							</dcsset:selection>
							<dcsset:filter/>
							<dcsset:appearance>
								<dcscor:item xsi:type="dcsset:SettingsParameterValue">
									<dcscor:parameter>Текст</dcscor:parameter>
									<dcscor:value xsi:type="v8:LocalStringType">
										<v8:item>
											<v8:lang>ru</v8:lang>
											<v8:content>Проживающих</v8:content>
										</v8:item>
									</dcscor:value>
								</dcscor:item>
								<dcscor:item xsi:type="dcsset:SettingsParameterValue">
									<dcscor:parameter>РазделительМножественныхЗначений</dcscor:parameter>
									<dcscor:value xsi:type="v8:LocalStringType">
										<v8:item>
											<v8:lang>ru</v8:lang>
											<v8:content> / </v8:content>
										</v8:item>
									</dcscor:value>
								</dcscor:item>
							</dcsset:appearance>
							<dcsset:useInGroup>DontUse</dcsset:useInGroup>
							<dcsset:useInHierarchicalGroup>DontUse</dcsset:useInHierarchicalGroup>
							<dcsset:useInOverall>DontUse</dcsset:useInOverall>
							<dcsset:useInParameters>DontUse</dcsset:useInParameters>
							<dcsset:useInFilter>DontUse</dcsset:useInFilter>
						</dcsset:item>
						<dcsset:item>
							<dcsset:selection>
								<dcsset:item>
									<dcsset:field>КоличествоЗарегистрированных</dcsset:field>
								</dcsset:item>
							</dcsset:selection>
							<dcsset:filter/>
							<dcsset:appearance>
								<dcscor:item xsi:type="dcsset:SettingsParameterValue">
									<dcscor:parameter>Текст</dcscor:parameter>
									<dcscor:value xsi:type="v8:LocalStringType">
										<v8:item>
											<v8:lang>ru</v8:lang>
											<v8:content>Зарегистрированных</v8:content>
										</v8:item>
									</dcscor:value>
								</dcscor:item>
								<dcscor:item xsi:type="dcsset:SettingsParameterValue">
									<dcscor:parameter>РазделительМножественныхЗначений</dcscor:parameter>
									<dcscor:value xsi:type="v8:LocalStringType">
										<v8:item>
											<v8:lang>ru</v8:lang>
											<v8:content> / </v8:content>
										</v8:item>
									</dcscor:value>
								</dcscor:item>
							</dcsset:appearance>
							<dcsset:useInGroup>DontUse</dcsset:useInGroup>
							<dcsset:useInHierarchicalGroup>DontUse</dcsset:useInHierarchicalGroup>
							<dcsset:useInOverall>DontUse</dcsset:useInOverall>
							<dcsset:useInParameters>DontUse</dcsset:useInParameters>
							<dcsset:useInFilter>DontUse</dcsset:useInFilter>
						</dcsset:item>
					</dcsset:conditionalAppearance>
					<dcsset:outputParameters>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:use>false</dcscor:use>
							<dcscor:parameter>РасположениеИтогов</dcscor:parameter>
							<dcscor:value xsi:type="dcscor:DataCompositionTotalPlacement">Begin</dcscor:value>
						</dcscor:item>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:use>false</dcscor:use>
							<dcscor:parameter>РасположениеГруппировки</dcscor:parameter>
							<dcscor:value xsi:type="dcsset:DataCompositionGroupPlacement">None</dcscor:value>
						</dcscor:item>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>РасположениеОбщихИтогов</dcscor:parameter>
							<dcscor:value xsi:type="dcscor:DataCompositionTotalPlacement">None</dcscor:value>
						</dcscor:item>
					</dcsset:outputParameters>
				</dcsset:column>
				<dcsset:column>
					<dcsset:groupItems>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>НоменклатурнаяГруппа</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
					</dcsset:groupItems>
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
					</dcsset:order>
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemAuto">
							<dcsset:use>false</dcsset:use>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:SelectedItemFolder">
							<dcsset:item xsi:type="dcsset:SelectedItemField">
								<dcsset:field>НоменклатурнаяГруппа</dcsset:field>
							</dcsset:item>
							<dcsset:item xsi:type="dcsset:SelectedItemField">
								<dcsset:field>Расход</dcsset:field>
							</dcsset:item>
							<dcsset:placement>Together</dcsset:placement>
						</dcsset:item>
					</dcsset:selection>
					<dcsset:conditionalAppearance>
						<dcsset:item>
							<dcsset:selection>
								<dcsset:item>
									<dcsset:field>Расход</dcsset:field>
								</dcsset:item>
							</dcsset:selection>
							<dcsset:filter/>
							<dcsset:appearance>
								<dcscor:item xsi:type="dcsset:SettingsParameterValue">
									<dcscor:use>false</dcscor:use>
									<dcscor:parameter>МинимальнаяШирина</dcscor:parameter>
									<dcscor:value xsi:type="xs:decimal">-0.1</dcscor:value>
								</dcscor:item>
								<dcscor:item xsi:type="dcsset:SettingsParameterValue">
									<dcscor:use>false</dcscor:use>
									<dcscor:parameter>МаксимальнаяШирина</dcscor:parameter>
									<dcscor:value xsi:type="xs:decimal">-0.1</dcscor:value>
								</dcscor:item>
								<dcscor:item xsi:type="dcsset:SettingsParameterValue">
									<dcscor:use>false</dcscor:use>
									<dcscor:parameter>МинимальнаяВысота</dcscor:parameter>
									<dcscor:value xsi:type="xs:decimal">-0.1</dcscor:value>
								</dcscor:item>
								<dcscor:item xsi:type="dcsset:SettingsParameterValue">
									<dcscor:use>false</dcscor:use>
									<dcscor:parameter>МаксимальнаяВысота</dcscor:parameter>
									<dcscor:value xsi:type="xs:decimal">-0.1</dcscor:value>
								</dcscor:item>
								<dcscor:item xsi:type="dcsset:SettingsParameterValue">
									<dcscor:parameter>Текст</dcscor:parameter>
									<dcscor:value xsi:type="v8:LocalStringType">
										<v8:item>
											<v8:lang>ru</v8:lang>
											<v8:content>Объем (м3)</v8:content>
										</v8:item>
									</dcscor:value>
								</dcscor:item>
								<dcscor:item xsi:type="dcsset:SettingsParameterValue">
									<dcscor:parameter>РазделительМножественныхЗначений</dcscor:parameter>
									<dcscor:value xsi:type="v8:LocalStringType"/>
								</dcscor:item>
							</dcsset:appearance>
							<dcsset:useInGroup>DontUse</dcsset:useInGroup>
							<dcsset:useInHierarchicalGroup>DontUse</dcsset:useInHierarchicalGroup>
							<dcsset:useInOverall>DontUse</dcsset:useInOverall>
							<dcsset:useInParameters>DontUse</dcsset:useInParameters>
							<dcsset:useInFilter>DontUse</dcsset:useInFilter>
						</dcsset:item>
						<dcsset:item>
							<dcsset:selection>
								<dcsset:item>
									<dcsset:field>Расход</dcsset:field>
								</dcsset:item>
								<dcsset:item>
									<dcsset:field>НоменклатурнаяГруппа</dcsset:field>
								</dcsset:item>
							</dcsset:selection>
							<dcsset:filter/>
							<dcsset:appearance>
								<dcscor:item xsi:type="dcsset:SettingsParameterValue">
									<dcscor:parameter>РазделительМножественныхЗначений</dcscor:parameter>
									<dcscor:value xsi:type="v8:LocalStringType"/>
								</dcscor:item>
							</dcsset:appearance>
							<dcsset:useInGroup>DontUse</dcsset:useInGroup>
							<dcsset:useInHierarchicalGroup>DontUse</dcsset:useInHierarchicalGroup>
							<dcsset:useInOverall>DontUse</dcsset:useInOverall>
							<dcsset:useInParameters>DontUse</dcsset:useInParameters>
							<dcsset:useInFilter>DontUse</dcsset:useInFilter>
						</dcsset:item>
					</dcsset:conditionalAppearance>
				</dcsset:column>
				<dcsset:row>
					<dcsset:groupItems>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>Группа</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
					</dcsset:groupItems>
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
					</dcsset:order>
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
						<dcsset:item xsi:type="dcsset:SelectedItemField">
							<dcsset:field>Группа</dcsset:field>
						</dcsset:item>
					</dcsset:selection>
					<dcsset:item>
						<dcsset:groupItems>
							<dcsset:item xsi:type="dcsset:GroupItemField">
								<dcsset:field>Контрагент</dcsset:field>
								<dcsset:groupType>Items</dcsset:groupType>
								<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
								<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
								<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
							</dcsset:item>
							<dcsset:item xsi:type="dcsset:GroupItemField">
								<dcsset:use>false</dcsset:use>
								<dcsset:field>Договор</dcsset:field>
								<dcsset:groupType>Items</dcsset:groupType>
								<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
								<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
								<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
							</dcsset:item>
						</dcsset:groupItems>
						<dcsset:order>
							<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
						</dcsset:order>
						<dcsset:selection>
							<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
							<dcsset:item xsi:type="dcsset:SelectedItemFolder">
								<dcsset:item xsi:type="dcsset:SelectedItemField">
									<dcsset:use>false</dcsset:use>
									<dcsset:field>Договор</dcsset:field>
								</dcsset:item>
								<dcsset:item xsi:type="dcsset:SelectedItemField">
									<dcsset:field>Контрагент</dcsset:field>
								</dcsset:item>
								<dcsset:placement>Auto</dcsset:placement>
							</dcsset:item>
							<dcsset:item xsi:type="dcsset:SelectedItemField">
								<dcsset:field>Расход</dcsset:field>
							</dcsset:item>
							<dcsset:item xsi:type="dcsset:SelectedItemField">
								<dcsset:field>Норма</dcsset:field>
							</dcsset:item>
						</dcsset:selection>
					</dcsset:item>
				</dcsset:row>
				<dcsset:selection>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ВидТарифа</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ВидУслуги</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>Группа</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>Договор</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>Контрагент</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ЛицевойСчет</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>Номенклатура</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>НоменклатурнаяГруппа</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>Период</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>Расход</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>Регистратор</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>Услуга</dcsset:field>
					</dcsset:item>
				</dcsset:selection>
			</dcsset:item>
		</dcsset:settings>
	</settingsVariant>
</DataCompositionSchema>