<?xml version="1.0" encoding="UTF-8"?>
<DataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema" xmlns:dcscom="http://v8.1c.ru/8.1/data-composition-system/common" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<dataSource>
		<name>ИсточникДанных</name>
		<dataSourceType>Local</dataSourceType>
	</dataSource>
	<dataSet xsi:type="DataSetQuery">
		<name>ДанныеПоПриборамУчета</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВидОбъекта</dataPath>
			<field>ВидОбъекта</field>
			<useRestriction>
				<condition>true</condition>
				<order>true</order>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВидУслуги</dataPath>
			<field>ВидУслуги</field>
			<valueType>
				<v8:Type xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.КВП_Услуги</v8:Type>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Здание</dataPath>
			<field>Здание</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Квартира</dataPath>
			<field>Квартира</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Помещение</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КодКвартиры</dataPath>
			<field>КодКвартиры</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Код помещения</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<condition>true</condition>
				<order>true</order>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>НомСчетчика</dataPath>
			<field>НомСчетчика</field>
			<useRestriction>
				<condition>true</condition>
				<order>true</order>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Объект</dataPath>
			<field>Объект</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Объект (не используется)</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<condition>true</condition>
			</useRestriction>
			<attributeUseRestriction>
				<condition>true</condition>
				<order>true</order>
			</attributeUseRestriction>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>Текст</dcscor:parameter>
					<dcscor:value xsi:nil="true"/>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Паркинг</dataPath>
			<field>Паркинг</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Счетчик</dataPath>
			<field>Счетчик</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>УровеньИерархии</dataPath>
			<field>УровеньИерархии</field>
			<useRestriction>
				<condition>true</condition>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПредставлениеОбъекта</dataPath>
			<field>ПредставлениеОбъекта</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Объект</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<condition>true</condition>
			</useRestriction>
			<attributeUseRestriction>
				<condition>true</condition>
				<order>true</order>
			</attributeUseRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Подъезд</dataPath>
			<field>Подъезд</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ЗаводскойНомер</dataPath>
			<field>ЗаводскойНомер</field>
			<useRestriction>
				<condition>true</condition>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Идентификатор</dataPath>
			<field>Идентификатор</field>
			<useRestriction>
				<condition>true</condition>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Коэффициент</dataPath>
			<field>Коэффициент</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Коэффициент трансформации</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<condition>true</condition>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Модель</dataPath>
			<field>Модель</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Разрядность</dataPath>
			<field>Разрядность</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СпособРегистрацииПоказаний</dataPath>
			<field>СпособРегистрацииПоказаний</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Тарифность</dataPath>
			<field>Тарифность</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоИПУ</dataPath>
			<field>КоличествоИПУ</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Количество индивидуальных счетчиков</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоКПУ</dataPath>
			<field>КоличествоКПУ</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Количество коллективных счетчиков</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДатаПоверки</dataPath>
			<field>ДатаПоверки</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ЛицевойСчет</dataPath>
			<field>ЛицевойСчет</field>
			<useRestriction>
				<field>true</field>
				<group>true</group>
				<order>true</order>
			</useRestriction>
			<attributeUseRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</attributeUseRestriction>
			<valueType>
				<v8:Type xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.КВП_ЛицевыеСчета</v8:Type>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>НомерПломбы</dataPath>
			<field>НомерПломбы</field>
		</field>
		<dataSource>ИсточникДанных</dataSource>
		<query>ВЫБРАТЬ РАЗРЕШЕННЫЕ
	УПЖКХ_ИсторияСостоянийПриборовУчетаИнтервальный.Объект КАК Объект,
	УПЖКХ_ИсторияСостоянийПриборовУчетаИнтервальный.ПриборУчета КАК ПриборУчета,
	МИНИМУМ(УПЖКХ_ИсторияСостоянийПриборовУчетаИнтервальный.ДатаНачала) КАК ДатаПоверки
ПОМЕСТИТЬ втСведенияОДатеПоверки
ИЗ
	РегистрСведений.УПЖКХ_ИсторияСостоянийПриборовУчетаИнтервальный КАК УПЖКХ_ИсторияСостоянийПриборовУчетаИнтервальный
ГДЕ
	(УПЖКХ_ИсторияСостоянийПриборовУчетаИнтервальный.ДатаНачала &lt;= &amp;НачалоПериода
				И УПЖКХ_ИсторияСостоянийПриборовУчетаИнтервальный.ДатаОкончания &gt;= &amp;НачалоПериода
			ИЛИ УПЖКХ_ИсторияСостоянийПриборовУчетаИнтервальный.ДатаНачала &gt; &amp;НачалоПериода)
	И УПЖКХ_ИсторияСостоянийПриборовУчетаИнтервальный.ПричинаОтключения = ЗНАЧЕНИЕ(Перечисление.УПЖКХ_ПричиныОтключенияПриборовУчета.Поверка)

СГРУППИРОВАТЬ ПО
	УПЖКХ_ИсторияСостоянийПриборовУчетаИнтервальный.Объект,
	УПЖКХ_ИсторияСостоянийПриборовУчетаИнтервальный.ПриборУчета
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ РАЗЛИЧНЫЕ
	УПЖКХ_ИсторияСостоянийПриборовУчетаИнтервальный.Объект КАК Объект,
	УПЖКХ_ИсторияСостоянийПриборовУчетаИнтервальный.ПриборУчета КАК Счетчик,
	УПЖКХ_ИсторияСостоянийПриборовУчетаИнтервальный.НомерПломбы КАК НомерПломбы
ПОМЕСТИТЬ врЗакрепленныеСчетчики
ИЗ
	РегистрСведений.УПЖКХ_ИсторияСостоянийПриборовУчетаИнтервальный КАК УПЖКХ_ИсторияСостоянийПриборовУчетаИнтервальный
ГДЕ
	УПЖКХ_ИсторияСостоянийПриборовУчетаИнтервальный.Действует
	И (УПЖКХ_ИсторияСостоянийПриборовУчетаИнтервальный.ДатаНачала &lt;= &amp;НачалоПериода
				И УПЖКХ_ИсторияСостоянийПриборовУчетаИнтервальный.ДатаОкончания &gt;= &amp;НачалоПериода
			ИЛИ УПЖКХ_ИсторияСостоянийПриборовУчетаИнтервальный.ДатаНачала МЕЖДУ &amp;НачалоПериода И &amp;КонецПериода)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ВЫБОР
		КОГДА ЗакрепленныеСчетчики.Объект ССЫЛКА Справочник.КВП_ЛицевыеСчета
			ТОГДА "ЛицевойСчет"
		ИНАЧЕ ВЫБОР
				КОГДА ЗакрепленныеСчетчики.Объект ССЫЛКА Справочник.КВП_Подъезды
					ТОГДА "Подъезд"
				ИНАЧЕ ВЫБОР
						КОГДА ЗакрепленныеСчетчики.Объект ССЫЛКА Справочник.КВП_Здания
								И ВЫРАЗИТЬ(ЗакрепленныеСчетчики.Объект КАК Справочник.КВП_Здания).ТипСооружения = ЗНАЧЕНИЕ(Перечисление.УПЖКХ_ТипСооружения.Здание)
							ТОГДА "Здание"
						ИНАЧЕ ВЫБОР
								КОГДА ЗакрепленныеСчетчики.Объект ССЫЛКА Справочник.УПЖКХ_Помещения
										И ВЫРАЗИТЬ(ЗакрепленныеСчетчики.Объект КАК Справочник.УПЖКХ_Помещения).ВидПомещения.ТипПомещения &lt;&gt; ЗНАЧЕНИЕ(Перечисление.КВП_ТипыПомещений.Автоместо)
									ТОГДА "Помещение"
								ИНАЧЕ ВЫБОР
										КОГДА ЗакрепленныеСчетчики.Объект ССЫЛКА Справочник.КВП_Здания
												И ВЫРАЗИТЬ(ЗакрепленныеСчетчики.Объект КАК Справочник.КВП_Здания).ТипСооружения = ЗНАЧЕНИЕ(Перечисление.УПЖКХ_ТипСооружения.Паркинг)
											ТОГДА "Паркинг"
										ИНАЧЕ ВЫБОР
												КОГДА ЗакрепленныеСчетчики.Объект ССЫЛКА Справочник.УПЖКХ_Помещения
														И ВЫРАЗИТЬ(ЗакрепленныеСчетчики.Объект КАК Справочник.УПЖКХ_Помещения).ВидПомещения.ТипПомещения = ЗНАЧЕНИЕ(Перечисление.КВП_ТипыПомещений.Автоместо)
													ТОГДА "ПарковочноеМесто"
											КОНЕЦ
									КОНЕЦ
							КОНЕЦ
					КОНЕЦ
			КОНЕЦ
	КОНЕЦ КАК ВидОбъекта,
	ВЫБОР
		КОГДА ЗакрепленныеСчетчики.Объект ССЫЛКА Справочник.КВП_ЛицевыеСчета
			ТОГДА 3
		ИНАЧЕ ВЫБОР
				КОГДА ЗакрепленныеСчетчики.Объект ССЫЛКА Справочник.КВП_Подъезды
					ТОГДА 2
				ИНАЧЕ ВЫБОР
						КОГДА ЗакрепленныеСчетчики.Объект ССЫЛКА Справочник.КВП_Здания
								И ВЫРАЗИТЬ(ЗакрепленныеСчетчики.Объект КАК Справочник.КВП_Здания).ТипСооружения = ЗНАЧЕНИЕ(Перечисление.УПЖКХ_ТипСооружения.Здание)
							ТОГДА 1
						ИНАЧЕ ВЫБОР
								КОГДА ЗакрепленныеСчетчики.Объект ССЫЛКА Справочник.УПЖКХ_Помещения
										И ВЫРАЗИТЬ(ЗакрепленныеСчетчики.Объект КАК Справочник.УПЖКХ_Помещения).ВидПомещения.ТипПомещения = ЗНАЧЕНИЕ(Перечисление.КВП_ТипыПомещений.Автоместо)
									ТОГДА 3
								ИНАЧЕ ВЫБОР
										КОГДА ЗакрепленныеСчетчики.Объект ССЫЛКА Справочник.КВП_Здания
												И ВЫРАЗИТЬ(ЗакрепленныеСчетчики.Объект КАК Справочник.КВП_Здания).ТипСооружения = ЗНАЧЕНИЕ(Перечисление.УПЖКХ_ТипСооружения.Паркинг)
											ТОГДА 1
										ИНАЧЕ ВЫБОР
												КОГДА ЗакрепленныеСчетчики.Объект ССЫЛКА Справочник.УПЖКХ_Помещения
														И ВЫРАЗИТЬ(ЗакрепленныеСчетчики.Объект КАК Справочник.УПЖКХ_Помещения).ВидПомещения.ТипПомещения &lt;&gt; ЗНАЧЕНИЕ(Перечисление.КВП_ТипыПомещений.Автоместо)
													ТОГДА 3
											КОНЕЦ
									КОНЕЦ
							КОНЕЦ
					КОНЕЦ
			КОНЕЦ
	КОНЕЦ КАК УровеньИерархии,
	ВЫБОР
		КОГДА ЗакрепленныеСчетчики.Объект ССЫЛКА Справочник.КВП_ЛицевыеСчета
			ТОГДА ВЫРАЗИТЬ(ЗакрепленныеСчетчики.Объект КАК Справочник.КВП_ЛицевыеСчета).Адрес.Владелец
		ИНАЧЕ ВЫБОР
				КОГДА ЗакрепленныеСчетчики.Объект ССЫЛКА Справочник.УПЖКХ_Помещения
					ТОГДА ВЫРАЗИТЬ(ЗакрепленныеСчетчики.Объект КАК Справочник.УПЖКХ_Помещения).Владелец
				ИНАЧЕ ВЫБОР
						КОГДА ЗакрепленныеСчетчики.Объект ССЫЛКА Справочник.КВП_Подъезды
							ТОГДА ВЫРАЗИТЬ(ЗакрепленныеСчетчики.Объект КАК Справочник.КВП_Подъезды).Владелец
						ИНАЧЕ ВЫБОР
								КОГДА ЗакрепленныеСчетчики.Объект ССЫЛКА Справочник.КВП_Здания
									ТОГДА ЗакрепленныеСчетчики.Объект
							КОНЕЦ
					КОНЕЦ
			КОНЕЦ
	КОНЕЦ КАК Здание,
	ВЫБОР
		КОГДА ЗакрепленныеСчетчики.Объект ССЫЛКА Справочник.УПЖКХ_Помещения
				И ВЫРАЗИТЬ(ЗакрепленныеСчетчики.Объект КАК Справочник.УПЖКХ_Помещения).ВидПомещения.ТипПомещения = ЗНАЧЕНИЕ(Перечисление.КВП_ТипыПомещений.Автоместо)
			ТОГДА ВЫРАЗИТЬ(ЗакрепленныеСчетчики.Объект КАК Справочник.УПЖКХ_Помещения).Владелец
		ИНАЧЕ ВЫБОР
				КОГДА ЗакрепленныеСчетчики.Объект ССЫЛКА Справочник.КВП_Здания
						И ВЫРАЗИТЬ(ЗакрепленныеСчетчики.Объект КАК Справочник.КВП_Здания).ТипСооружения = ЗНАЧЕНИЕ(Перечисление.УПЖКХ_ТипСооружения.Паркинг)
					ТОГДА ЗакрепленныеСчетчики.Объект
			КОНЕЦ
	КОНЕЦ КАК Паркинг,
	ВЫБОР
		КОГДА ЗакрепленныеСчетчики.Объект ССЫЛКА Справочник.КВП_ЛицевыеСчета
			ТОГДА КВП_Подъезды.Ссылка
		ИНАЧЕ ВЫБОР
				КОГДА ЗакрепленныеСчетчики.Объект ССЫЛКА Справочник.УПЖКХ_Помещения
						И ВЫРАЗИТЬ(ЗакрепленныеСчетчики.Объект КАК Справочник.УПЖКХ_Помещения).ВидПомещения.ТипПомещения &lt;&gt; ЗНАЧЕНИЕ(Перечисление.КВП_ТипыПомещений.Автоместо)
					ТОГДА КВП_Подъезды.Ссылка
				ИНАЧЕ ВЫБОР
						КОГДА ЗакрепленныеСчетчики.Объект ССЫЛКА Справочник.КВП_Подъезды
							ТОГДА ЗакрепленныеСчетчики.Объект
					КОНЕЦ
			КОНЕЦ
	КОНЕЦ КАК Подъезд,
	ВЫБОР
		КОГДА ЗакрепленныеСчетчики.Объект ССЫЛКА Справочник.КВП_ЛицевыеСчета
			ТОГДА ВЫРАЗИТЬ(ЗакрепленныеСчетчики.Объект КАК Справочник.КВП_ЛицевыеСчета).Адрес.Наименование + ", " + ВЫРАЗИТЬ(ЗакрепленныеСчетчики.Объект КАК Справочник.КВП_ЛицевыеСчета).Наименование
		ИНАЧЕ ЗакрепленныеСчетчики.Объект
	КОНЕЦ КАК ПредставлениеОбъекта,
	ЗакрепленныеСчетчики.Объект КАК Объект,
	ЗакрепленныеСчетчики.Счетчик.Представление КАК НомСчетчика,
	ЗакрепленныеСчетчики.Счетчик КАК Счетчик,
	ЗакрепленныеСчетчики.Счетчик.ВидУслуги КАК ВидУслуги,
	ЕСТЬNULL(ЗакрепленныеСчетчики.Объект.Адрес.Код, ВЫБОР
			КОГДА ЗакрепленныеСчетчики.Объект ССЫЛКА Справочник.УПЖКХ_Помещения
				ТОГДА ВЫРАЗИТЬ(ЗакрепленныеСчетчики.Объект КАК Справочник.УПЖКХ_Помещения).Код
			ИНАЧЕ 0
		КОНЕЦ) КАК КодКвартиры,
	ВЫБОР
		КОГДА ЗакрепленныеСчетчики.Объект ССЫЛКА Справочник.КВП_ЛицевыеСчета
			ТОГДА ВЫРАЗИТЬ(ЗакрепленныеСчетчики.Объект КАК Справочник.КВП_ЛицевыеСчета).Адрес
		КОГДА ЗакрепленныеСчетчики.Объект ССЫЛКА Справочник.УПЖКХ_Помещения
			ТОГДА ЗакрепленныеСчетчики.Объект
	КОНЕЦ КАК Квартира,
	ВЫБОР
		КОГДА ЗакрепленныеСчетчики.Объект ССЫЛКА Справочник.КВП_ЛицевыеСчета
			ТОГДА ЗакрепленныеСчетчики.Объект
	КОНЕЦ КАК ЛицевойСчет,
	ЗакрепленныеСчетчики.Счетчик КАК КоличествоПУ,
	ЗакрепленныеСчетчики.НомерПломбы КАК НомерПломбы
ПОМЕСТИТЬ врПУ
ИЗ
	врЗакрепленныеСчетчики КАК ЗакрепленныеСчетчики
		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.КВП_Подъезды КАК КВП_Подъезды
		ПО (ВЫРАЗИТЬ(ЗакрепленныеСчетчики.Объект КАК Справочник.КВП_ЛицевыеСчета).Адрес.Владелец = КВП_Подъезды.Владелец
					И (ВЫРАЗИТЬ(ЗакрепленныеСчетчики.Объект КАК Справочник.КВП_ЛицевыеСчета).Адрес.Код МЕЖДУ КВП_Подъезды.НомерПервойКвартиры И КВП_Подъезды.НомерПоследнейКвартиры)
				ИЛИ ВЫРАЗИТЬ(ЗакрепленныеСчетчики.Объект КАК Справочник.УПЖКХ_Помещения).Владелец = КВП_Подъезды.Владелец
					И (ВЫРАЗИТЬ(ЗакрепленныеСчетчики.Объект КАК Справочник.УПЖКХ_Помещения).Код МЕЖДУ КВП_Подъезды.НомерПервойКвартиры И КВП_Подъезды.НомерПоследнейКвартиры))
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗЛИЧНЫЕ
	врПУ.ВидОбъекта КАК ВидОбъекта,
	врПУ.УровеньИерархии КАК УровеньИерархии,
	врПУ.Здание КАК Здание,
	врПУ.Паркинг КАК Паркинг,
	врПУ.Подъезд КАК Подъезд,
	врПУ.ПредставлениеОбъекта КАК ПредставлениеОбъекта,
	врПУ.Объект КАК Объект,
	врПУ.НомСчетчика КАК НомСчетчика,
	врПУ.ВидУслуги КАК ВидУслуги,
	врПУ.КодКвартиры КАК КодКвартиры,
	врПУ.Квартира КАК Квартира,
	врПУ.Счетчик КАК Счетчик,
	ВЫБОР
		КОГДА врПУ.ВидОбъекта = "Здание"
				ИЛИ врПУ.ВидОбъекта = "Подъезд"
				ИЛИ врПУ.ВидОбъекта = "Паркинг"
			ТОГДА 1
		ИНАЧЕ 0
	КОНЕЦ КАК КоличествоКПУ,
	врПУ.Счетчик.Разрядность КАК Разрядность,
	врПУ.Счетчик.Коэффициент КАК Коэффициент,
	врПУ.Счетчик.Модель КАК Модель,
	врПУ.Счетчик.Идентификатор КАК Идентификатор,
	врПУ.Счетчик.ЗаводскойНомер КАК ЗаводскойНомер,
	врПУ.Счетчик.СпособРегистрацииПоказаний КАК СпособРегистрацииПоказаний,
	врПУ.Счетчик.Тарифность КАК Тарифность,
	ВЫБОР
		КОГДА врПУ.ВидОбъекта = "ЛицевойСчет"
				ИЛИ врПУ.ВидОбъекта = "Помещение"
				ИЛИ врПУ.ВидОбъекта = "ПарковочноеМесто"
			ТОГДА 1
		ИНАЧЕ 0
	КОНЕЦ КАК КоличествоИПУ,
	ЕСТЬNULL(втСведенияОДатеПоверки.ДатаПоверки, "НЕТ") КАК ДатаПоверки,
	врПУ.ЛицевойСчет КАК ЛицевойСчет,
	врПУ.НомерПломбы КАК НомерПломбы
ИЗ
	врПУ КАК врПУ
		ЛЕВОЕ СОЕДИНЕНИЕ втСведенияОДатеПоверки КАК втСведенияОДатеПоверки
		ПО врПУ.Счетчик = втСведенияОДатеПоверки.ПриборУчета
			И врПУ.Объект = втСведенияОДатеПоверки.Объект</query>
	</dataSet>
	<dataSet xsi:type="DataSetQuery">
		<name>ТекущиеПоказанияПУ</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>Счетчик</dataPath>
			<field>Счетчик</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>НочноеПоказание</dataPath>
			<field>НочноеПоказание</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧН=-; ЧГ=0</dcscor:value>
				</dcscor:item>
			</appearance>
			<inputParameters>
				<dcscor:item>
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>ФорматРедактирования</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧН=-</dcscor:value>
				</dcscor:item>
			</inputParameters>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДневноеПоказание</dataPath>
			<field>ДневноеПоказание</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧН=-; ЧГ=0</dcscor:value>
				</dcscor:item>
			</appearance>
			<inputParameters>
				<dcscor:item>
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>ФорматРедактирования</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧН=-</dcscor:value>
				</dcscor:item>
			</inputParameters>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПиковоеПоказание</dataPath>
			<field>ПиковоеПоказание</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧН=-; ЧГ=0</dcscor:value>
				</dcscor:item>
			</appearance>
			<inputParameters>
				<dcscor:item>
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>ФорматРедактирования</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧН=-</dcscor:value>
				</dcscor:item>
			</inputParameters>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДатаПоказания</dataPath>
			<field>ДатаПоказания</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Дата показания</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ДФ=dd.MM.yyyy</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<dataSource>ИсточникДанных</dataSource>
		<query>ВЫБРАТЬ
	КВП_ПоказанияСчетчиковСрезПоследних.Период КАК ДатаПоказания,
	КВП_ПоказанияСчетчиковСрезПоследних.Счетчик,
	КВП_ПоказанияСчетчиковСрезПоследних.ДневноеПоказание,
	КВП_ПоказанияСчетчиковСрезПоследних.НочноеПоказание,
	КВП_ПоказанияСчетчиковСрезПоследних.ПиковоеПоказание
ИЗ
	РегистрСведений.КВП_ПоказанияСчетчиков.СрезПоследних(&amp;КонецПериода, ) КАК КВП_ПоказанияСчетчиковСрезПоследних</query>
	</dataSet>
	<dataSetLink>
		<sourceDataSet>ДанныеПоПриборамУчета</sourceDataSet>
		<destinationDataSet>ТекущиеПоказанияПУ</destinationDataSet>
		<sourceExpression>Счетчик</sourceExpression>
		<destinationExpression>Счетчик</destinationExpression>
	</dataSetLink>
	<totalField>
		<dataPath>ЗаводскойНомер</dataPath>
		<expression>Максимум(ЗаводскойНомер)</expression>
	</totalField>
	<totalField>
		<dataPath>Идентификатор</dataPath>
		<expression>Максимум(Идентификатор)</expression>
	</totalField>
	<totalField>
		<dataPath>Коэффициент</dataPath>
		<expression>Максимум(Коэффициент)</expression>
	</totalField>
	<totalField>
		<dataPath>Модель</dataPath>
		<expression>Максимум(Модель)</expression>
	</totalField>
	<totalField>
		<dataPath>Разрядность</dataPath>
		<expression>Максимум(Разрядность)</expression>
	</totalField>
	<totalField>
		<dataPath>СпособРегистрацииПоказаний</dataPath>
		<expression>Максимум(СпособРегистрацииПоказаний)</expression>
	</totalField>
	<totalField>
		<dataPath>Тарифность</dataPath>
		<expression>Максимум(Тарифность)</expression>
	</totalField>
	<totalField>
		<dataPath>КоличествоИПУ</dataPath>
		<expression>Сумма(КоличествоИПУ)</expression>
	</totalField>
	<totalField>
		<dataPath>КоличествоКПУ</dataPath>
		<expression>Сумма(КоличествоКПУ)</expression>
	</totalField>
	<totalField>
		<dataPath>ДатаПоверки</dataPath>
		<expression>Максимум(ДатаПоверки)</expression>
	</totalField>
	<totalField>
		<dataPath>ДатаПоказания</dataPath>
		<expression>Максимум(ДатаПоказания)</expression>
	</totalField>
	<totalField>
		<dataPath>ДневноеПоказание</dataPath>
		<expression>Максимум(ДневноеПоказание)</expression>
	</totalField>
	<totalField>
		<dataPath>НочноеПоказание</dataPath>
		<expression>Максимум(НочноеПоказание)</expression>
	</totalField>
	<totalField>
		<dataPath>ПиковоеПоказание</dataPath>
		<expression>Максимум(ПиковоеПоказание)</expression>
	</totalField>
	<totalField>
		<dataPath>НомерПломбы</dataPath>
		<expression>Максимум(НомерПломбы)</expression>
	</totalField>
	<parameter>
		<name>Период</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Период</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>НачалоПериода</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Начало периода</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>КонецПериода</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Конец периода</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>Date</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
	</parameter>
	<settingsVariant>
		<dcsset:name>Основной</dcsset:name>
		<dcsset:presentation xsi:type="xs:string">Основной</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:selection>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>КоличествоИПУ</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>КоличествоКПУ</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemFolder">
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Характеристики</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>СпособРегистрацииПоказаний</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>Тарифность</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>Коэффициент</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>Разрядность</dcsset:field>
					</dcsset:item>
					<dcsset:placement>Together</dcsset:placement>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Модель</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Идентификатор</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ЗаводскойНомер</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ДатаПоверки</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>НомерПломбы</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemFolder">
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Текущие показания</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ДатаПоказания</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ДневноеПоказание</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>НочноеПоказание</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ПиковоеПоказание</dcsset:field>
					</dcsset:item>
					<dcsset:placement>Auto</dcsset:placement>
				</dcsset:item>
			</dcsset:selection>
			<dcsset:dataParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>Период</dcscor:parameter>
					<dcscor:value xsi:type="xs:dateTime">0001-01-01T00:00:00</dcscor:value>
					<dcsset:viewMode>Inaccessible</dcsset:viewMode>
				</dcscor:item>
			</dcsset:dataParameters>
			<dcsset:outputParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>РасположениеИтогов</dcscor:parameter>
					<dcscor:value xsi:type="dcscor:DataCompositionTotalPlacement">Auto</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ГоризонтальноеРасположениеОбщихИтогов</dcscor:parameter>
					<dcscor:value xsi:type="dcscor:DataCompositionTotalPlacement">None</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВертикальноеРасположениеОбщихИтогов</dcscor:parameter>
					<dcscor:value xsi:type="dcscor:DataCompositionTotalPlacement">End</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>ТипДиаграммы</dcscor:parameter>
					<dcscor:value xsi:type="v8ui:ChartType">Column3D</dcscor:value>
					<dcscor:item xsi:type="dcsset:SettingsParameterValue">
						<dcscor:parameter>ТипДиаграммы.Окантовка</dcscor:parameter>
						<dcscor:value xsi:type="xs:boolean">false</dcscor:value>
					</dcscor:item>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыводитьЗаголовок</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">DontOutput</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Заголовок</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Потребление по приборам учета</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыводитьПараметрыДанных</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">DontOutput</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыводитьОтбор</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">DontOutput</dcscor:value>
				</dcscor:item>
			</dcsset:outputParameters>
			<dcsset:item xsi:type="dcsset:StructureItemGroup">
				<dcsset:groupItems>
					<dcsset:item xsi:type="dcsset:GroupItemField">
						<dcsset:field>Здание</dcsset:field>
						<dcsset:groupType>Items</dcsset:groupType>
						<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
						<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
						<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
					</dcsset:item>
				</dcsset:groupItems>
				<dcsset:order>
					<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
				</dcsset:order>
				<dcsset:selection>
					<dcsset:item xsi:type="dcsset:SelectedItemAuto">
						<dcsset:use>false</dcsset:use>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>Здание</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>КоличествоИПУ</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>КоличествоКПУ</dcsset:field>
					</dcsset:item>
				</dcsset:selection>
				<dcsset:item xsi:type="dcsset:StructureItemGroup">
					<dcsset:groupItems>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>УровеньИерархии</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>ПредставлениеОбъекта</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>Квартира</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
					</dcsset:groupItems>
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemAuto">
							<dcsset:use>false</dcsset:use>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:OrderItemField">
							<dcsset:field>УровеньИерархии</dcsset:field>
							<dcsset:orderType>Asc</dcsset:orderType>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:OrderItemField">
							<dcsset:field>Квартира.ВидПомещения</dcsset:field>
							<dcsset:orderType>Asc</dcsset:orderType>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:OrderItemField">
							<dcsset:field>Квартира.Код</dcsset:field>
							<dcsset:orderType>Asc</dcsset:orderType>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:OrderItemField">
							<dcsset:field>ПредставлениеОбъекта</dcsset:field>
							<dcsset:orderType>Asc</dcsset:orderType>
						</dcsset:item>
					</dcsset:order>
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemAuto">
							<dcsset:use>false</dcsset:use>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:SelectedItemField">
							<dcsset:field>ПредставлениеОбъекта</dcsset:field>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:SelectedItemField">
							<dcsset:field>КоличествоИПУ</dcsset:field>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:SelectedItemField">
							<dcsset:field>КоличествоКПУ</dcsset:field>
						</dcsset:item>
					</dcsset:selection>
					<dcsset:item xsi:type="dcsset:StructureItemGroup">
						<dcsset:groupItems>
							<dcsset:item xsi:type="dcsset:GroupItemField">
								<dcsset:field>Счетчик</dcsset:field>
								<dcsset:groupType>Items</dcsset:groupType>
								<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
								<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
								<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
							</dcsset:item>
						</dcsset:groupItems>
						<dcsset:order>
							<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
						</dcsset:order>
						<dcsset:selection>
							<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
						</dcsset:selection>
					</dcsset:item>
				</dcsset:item>
			</dcsset:item>
		</dcsset:settings>
	</settingsVariant>
</DataCompositionSchema>